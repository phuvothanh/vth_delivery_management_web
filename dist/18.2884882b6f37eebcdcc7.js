(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{y0IW:function(e,t,i){"use strict";i.r(t),i.d(t,"BannerModule",function(){return q});var a=i("ofXK"),n=i("tyNb"),r=i("LRne"),o=i("cNn3"),s=i("gSRN"),c=i("eIep"),l=i("fXoL"),b=i("tk/3"),d=i("nS6G");let h=(()=>{class e{constructor(e){this.http=e,this.baseUrl=d.a.remoteVTHealthcareServiceBaseUrl}getAll(e){return this.http.post(this.baseUrl+"/api/v1/Banner/GetAll",e)}}return e.\u0275fac=function(t){return new(t||e)(l.Ub(b.b))},e.\u0275prov=l.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var f=i("8/KI"),p=i("k8YA"),m=i("WYlB"),u=i("ZzPI"),g=i("6t9p"),x=i("PVOt");const w=["bannersDataGrid"];function v(e,t){1&e&&(l.Qb(0,"div",32),l.Nb(1,"img",33),l.Pb()),2&e&&(l.Bb(1),l.fc("src","assets/image/plus.png",l.rc))}function S(e,t){if(1&e&&(l.Qb(0,"div",34),l.Nb(1,"img",35),l.Pb()),2&e){const e=l.Zb();l.Bb(1),l.fc("src",e.image,l.rc)}}function y(e,t){if(1&e&&(l.Qb(0,"div"),l.Nb(1,"img",36),l.Pb()),2&e){const e=t.$implicit;l.Bb(1),l.fc("src",e.data.image,l.rc)}}function P(e,t){if(1&e){const e=l.Rb();l.Qb(0,"div"),l.Qb(1,"dx-button",37),l.Xb("onClick",function(){return l.pc(e),l.Zb().onDelete()}),l.Pb(),l.Pb()}}function B(e,t){1&e&&(l.Qb(0,"span",41),l.vc(1,"T\u1ea1o m\u1edbi"),l.Pb())}function D(e,t){1&e&&(l.Qb(0,"span",42),l.vc(1,"Ph\xea duy\u1ec7t"),l.Pb())}function Q(e,t){1&e&&(l.Qb(0,"span",43),l.vc(1,"H\u1ee7y"),l.Pb())}function C(e,t){if(1&e&&(l.Qb(0,"div"),l.tc(1,B,2,0,"span",38),l.tc(2,D,2,0,"span",39),l.tc(3,Q,2,0,"span",40),l.Pb()),2&e){const e=t.$implicit;l.Bb(1),l.fc("ngIf",0===e.value),l.Bb(1),l.fc("ngIf",1===e.value),l.Bb(1),l.fc("ngIf",2===e.value)}}const T=function(){return[10,20,50,100,500]};let k=(()=>{class e{constructor(e,t,i){this.bannerServiceProxy=e,this.bannerService=t,this.messageService=i,this.getScreenGridSize()}ngOnInit(){this.banners=new s.a({load:e=>this.bannerService.getAll(e.mapFrom())}),this.formData=new o.a}getScreenGridSize(e){this.screenHeight=window.innerHeight,this.gridHeight=this.screenHeight-180+"px"}clearForm(){this.formData=new o.a,this.image=null,this.imageFile=null}onFormSubmit(e){if(e.preventDefault(),this.formData&&this.formData.id){const e=new o.X;e.init(this.formData),e.imageFile=this.imageFile,this.bannerServiceProxy.update(this.formData.id,e).subscribe(e=>{this.messageService.success("Ch\u1ec9nh s\u1eeda th\xe0nh c\xf4ng!"),this.bannersDataGrid.instance.refresh(),this._loadDetail(this.formData.id).subscribe(e=>{this._refreshDataGrid()})})}else{const e=new o.e;e.init(this.formData),e.imageFile=this.imageFile,this.bannerServiceProxy.create(e).subscribe(e=>{this.messageService.success("T\u1ea1o m\u1edbi th\xe0nh c\xf4ng!"),this.bannersDataGrid.instance.refresh(),this._loadDetail(e).subscribe(e=>{this._refreshDataGrid()})})}}onSelectionChanged(e){this.selectedRows&&this.selectedRows.length>0&&this._loadDetail(this.selectedRows[0].id).subscribe(e=>{this._refreshDataGrid()})}_loadDetail(e){return this.bannerServiceProxy.get(e).pipe(Object(c.a)(e=>(this.formData=e,this.image=e.image,this.imageFile=null,Object(r.a)(e))))}_refreshDataGrid(){this.bannersDataGrid.instance.refresh()}onDelete(){this.messageService.confirmDelete(e=>{e&&this.formData&&this.formData.id&&this.bannerServiceProxy.delete(this.formData.id).subscribe(e=>{this.messageService.success("X\xf3a th\xe0nh c\xf4ng!"),this.bannersDataGrid.instance.refresh(),this.formData=new o.a,this.image=null,this.imageFile=null})})}handleInputChange(e){const t=e.dataTransfer?e.dataTransfer.files[0]:e.target.files[0],i=new FileReader;t.type.match(/image-*/)&&(i.onload=this._handleReaderLoaded.bind(this),i.readAsDataURL(t))}_handleReaderLoaded(e){const t=e.target;this.image=t.result,this.imageFile=t.result}}return e.\u0275fac=function(t){return new(t||e)(l.Mb(o.b),l.Mb(h),l.Mb(f.a))},e.\u0275cmp=l.Gb({type:e,selectors:[["app-banner-list"]],viewQuery:function(e,t){if(1&e&&l.zc(w,1),2&e){let e;l.lc(e=l.Yb())&&(t.bannersDataGrid=e.first)}},hostBindings:function(e,t){1&e&&l.Xb("resize",function(e){return t.getScreenGridSize(e)},!1,l.oc)},decls:43,vars:43,consts:[[1,"card","custom-card",2,"margin-bottom","5px"],[1,"card-header"],[1,"card-body"],[3,"readOnly","formData","showColonAfterLabel","showValidationSummary"],["itemType","group","caption","",3,"colCount"],["itemType","group","caption","",3,"colSpan"],["action","",3,"submit"],["validationGroup","newsForm",3,"readOnly","formData","showColonAfterLabel","showValidationSummary"],["itemType","group","caption","Th\xf4ng tin ch\xednh"],["text","T\u1ea1o m\u1edbi","icon","fa fa-plus-square","type","success",2,"margin-right","10px","background-color","#ed8200","font-weight","bold","padding","2px",3,"onClick"],["text","L\u01b0u","type","success","icon","fa fa-floppy-o","validationGroup","newsForm",2,"margin-right","10px","background-color","#12007c","font-weight","bold","padding","2px",3,"useSubmitBehavior"],["itemType","group","caption",""],["dataField","name",3,"colSpan"],[3,"text"],["type","required","message","Tr\u01b0\u1eddng n\xe0y l\xe0 b\u1eaft bu\u1ed9c"],["type","stringLength","message","H\u1ecd t\xean kh\xf4ng v\u01b0\u1ee3t qu\xe1 300 k\xfd t\u1ef1",3,"max"],[3,"colSpan"],[1,"image-upload",2,"height","8rem"],["type","file","accept","image/*",3,"change"],["style","position: absolute; z-index: 1; top: 0;bottom: 0; border: 2px dashed #c8c8c8; border-radius: 0.5rem;",4,"ngIf"],["style","position: absolute; z-index: 1; top: 0; bottom: 0;",4,"ngIf"],["itemType","group","caption","Danh s\xe1ch banner",3,"colSpan"],[3,"height","showColumnLines","remoteOperations","rowAlternationEnabled","selectedRowKeys","hoverStateEnabled","dataSource","columnAutoWidth","showBorders","heightChange","selectedRowKeysChange","onSelectionChanged"],["bannersDataGrid",""],["mode","single"],[3,"pageSize"],[3,"showPageSizeSelector","allowedPageSizes","showInfo"],[3,"visible"],["dataField","name","caption","T\xean"],["caption","H\xecnh \u1ea3nh","cellTemplate","imageCellTemplate"],[4,"dxTemplate","dxTemplateOf"],["dataField","","caption","T\xf9y ch\u1ec9nh","alignment","center","cellTemplate","cellTemplate",3,"width","allowFiltering","allowSorting"],[2,"position","absolute","z-index","1","top","0","bottom","0","border","2px dashed #c8c8c8","border-radius","0.5rem"],[2,"width","2rem","height","2rem","margin","3rem","display","block",3,"src"],[2,"position","absolute","z-index","1","top","0","bottom","0"],[2,"max-width","100%","max-height","100%",3,"src"],[2,"width","150px","max-height","65px","object-fit","cover",3,"src"],["icon","fa fa-trash","text","X\xf3a","type","success",2,"background-color","#ff000f",3,"onClick"],["style","background-color: #00a2b7; border-color: transparent; color: #fff; padding: 2px 10px; border-radius: 20px;",4,"ngIf"],["style","background-color: #ed8200; border-color: transparent; color: #fff; padding: 2px 10px; border-radius: 20px;",4,"ngIf"],["style","background-color: #ff000f; border-color: transparent; color: #fff; padding: 2px 10px; border-radius: 20px;",4,"ngIf"],[2,"background-color","#00a2b7","border-color","transparent","color","#fff","padding","2px 10px","border-radius","20px"],[2,"background-color","#ed8200","border-color","transparent","color","#fff","padding","2px 10px","border-radius","20px"],[2,"background-color","#ff000f","border-color","transparent","color","#fff","padding","2px 10px","border-radius","20px"]],template:function(e,t){1&e&&(l.Qb(0,"div",0),l.Nb(1,"div",1),l.Qb(2,"div",2),l.Qb(3,"dx-form",3),l.Qb(4,"dxi-item",4),l.Qb(5,"dxi-item",5),l.Qb(6,"form",6),l.Xb("submit",function(e){return t.onFormSubmit(e)}),l.Qb(7,"dx-form",7),l.Qb(8,"dxi-item",8),l.Qb(9,"dxi-item",4),l.Qb(10,"dx-button",9),l.Xb("onClick",function(){return t.clearForm()}),l.Pb(),l.Nb(11,"dx-button",10),l.Pb(),l.Qb(12,"dxi-item",11),l.Qb(13,"dxi-item",4),l.Qb(14,"dxi-item",12),l.Nb(15,"dxo-label",13),l.Nb(16,"dxi-validation-rule",14),l.Nb(17,"dxi-validation-rule",15),l.Pb(),l.Pb(),l.Qb(18,"dxi-item",4),l.Qb(19,"dxi-item",16),l.Nb(20,"dxo-label",13),l.Qb(21,"div",17),l.Qb(22,"input",18),l.Xb("change",function(e){return t.handleInputChange(e)}),l.Pb(),l.tc(23,v,2,1,"div",19),l.tc(24,S,2,1,"div",20),l.Pb(),l.Nb(25,"dxi-validation-rule",14),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Qb(26,"dxi-item",21),l.Qb(27,"dxi-item",11),l.Nb(28,"dxi-item",11),l.Pb(),l.Qb(29,"dxi-item",11),l.Qb(30,"dxi-item"),l.Qb(31,"dx-data-grid",22,23),l.Xb("heightChange",function(e){return t.gridHeight=e})("selectedRowKeysChange",function(e){return t.selectedRows=e})("onSelectionChanged",function(e){return t.onSelectionChanged(e)}),l.Nb(33,"dxo-selection",24),l.Nb(34,"dxo-paging",25),l.Nb(35,"dxo-pager",26),l.Nb(36,"dxo-header-filter",27),l.Nb(37,"dxi-column",28),l.Nb(38,"dxi-column",29),l.tc(39,y,2,1,"div",30),l.Nb(40,"dxi-column",31),l.tc(41,P,2,0,"div",30),l.tc(42,C,4,3,"div",30),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb()),2&e&&(l.Bb(3),l.fc("readOnly",!1)("formData",t)("showColonAfterLabel",!0)("showValidationSummary",!1),l.Bb(1),l.fc("colCount",8),l.Bb(1),l.fc("colSpan",4),l.Bb(2),l.fc("readOnly",!1)("formData",t.formData)("showColonAfterLabel",!0)("showValidationSummary",!1),l.Bb(2),l.fc("colCount",2),l.Bb(2),l.fc("useSubmitBehavior",!0),l.Bb(2),l.fc("colCount",7),l.Bb(1),l.fc("colSpan",4),l.Bb(1),l.fc("text","T\xean"),l.Bb(2),l.fc("max",300),l.Bb(1),l.fc("colCount",7),l.Bb(1),l.fc("colSpan",7),l.Bb(1),l.fc("text","Ch\u1ecdn h\xecnh \u1ea3nh"),l.Bb(3),l.fc("ngIf",!t.image),l.Bb(1),l.fc("ngIf",t.image),l.Bb(2),l.fc("colSpan",4),l.Bb(5),l.fc("height",t.gridHeight)("showColumnLines",!1)("remoteOperations",!0)("rowAlternationEnabled",!0)("selectedRowKeys",t.selectedRows)("hoverStateEnabled",!0)("dataSource",t.banners)("columnAutoWidth",!0)("showBorders",!0),l.Bb(3),l.fc("pageSize",20),l.Bb(1),l.fc("showPageSizeSelector",!0)("allowedPageSizes",l.hc(42,T))("showInfo",!0),l.Bb(1),l.fc("visible",!0),l.Bb(3),l.fc("dxTemplateOf","imageCellTemplate"),l.Bb(1),l.fc("width",100)("allowFiltering",!1)("allowSorting",!1),l.Bb(1),l.fc("dxTemplateOf","cellTemplate"),l.Bb(1),l.fc("dxTemplateOf","statusCellTemplate"))},directives:[p.a,g.k,m.a,g.lb,g.A,a.j,u.a,g.Hb,g.yb,g.wb,g.fb,g.f,x.d],styles:[""]}),e})();const I=[{path:"",redirectTo:"list",pathMatch:"prefix"},{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Gb({type:e,selectors:[["app-banner"]],decls:1,vars:0,template:function(e,t){1&e&&l.Nb(0,"router-outlet")},directives:[n.g],styles:[""]}),e})(),children:[{path:"list",component:k}]}];let N=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.Kb({type:e}),e.\u0275inj=l.Jb({imports:[[n.f.forChild(I)],n.f]}),e})();var G=i("7m6G"),F=i("4Ewp"),z=i("Wx6Q"),R=i("Qlw+"),A=i("gMzk"),O=i("Gkpw"),L=i("uTW7"),X=i("ir3x"),H=i("M+dh"),_=i("LT8A"),K=i("zn50"),M=i("BbNB"),V=i("xcIV"),j=i("lgXn"),W=i("w76M"),E=i("Ylls"),U=i("/ZIY"),Y=i("XPKZ"),Z=i("4/q7");let q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.Kb({type:e}),e.\u0275inj=l.Jb({providers:[],imports:[[a.b,N,m.b,G.a,F.a,z.a,R.a,p.b,A.b,O.b,L.a,X.a,H.a,_.a,K.a,M.a,V.a,x.f,u.b,j.a,W.b,E.a,U.a,Y.b,Z.b]]}),e})()}}]);