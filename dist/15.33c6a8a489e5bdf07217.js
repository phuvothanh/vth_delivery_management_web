(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"+p+5":function(e,t,i){"use strict";i.r(t),i.d(t,"OrderModule",function(){return Tt});var r=i("3Pt+"),n=i("ofXK"),a=i("mrSG"),o=i("wd/R"),s=i("XNiG"),d=i("LRne"),c=i("nS6G"),l=i("gSRN"),h=i("cNn3"),u=i("fXoL"),p=i("8AVY"),b=i("8/KI"),m=i("DUwT"),g=i("tyNb"),f=i("tk/3");let v=(()=>{class e{constructor(e){this.http=e,this.baseUrl=c.a.remoteVTHealthcareServiceBaseUrl}getAll(e){return this.http.post(this.baseUrl+"/api/v1/Product/GetAll",e)}getLookup(e){return this.http.get(this.baseUrl+"/api/v1/Product/GetLookup")}}return e.\u0275fac=function(t){return new(t||e)(u.Ub(f.b))},e.\u0275prov=u.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var S=i("Tp06"),x=i("La7w"),y=i("5IEl"),P=i("9i78"),C=i("k8YA"),O=i("WYlB"),w=i("Gkpw"),k=i("QE0S"),A=i("ZzPI"),B=i("6t9p"),T=i("PVOt"),E=i("bH2/");const Q=["productOrderDataGrid"],I=["customerLookup"],_=["selectShippingAutocomplete"];function M(e,t){1&e&&u.Nb(0,"dxi-column",53)}function F(e,t){1&e&&u.Nb(0,"dxi-column",50)}function N(e,t){if(1&e){const e=u.Rb();u.Qb(0,"div"),u.Qb(1,"div",54),u.Qb(2,"dx-select-box",55),u.Xb("onValueChanged",function(t){return u.pc(e),u.Zb().onSelectCompanyReceiptAddressEvent(t)}),u.Pb(),u.Pb(),u.Pb()}if(2&e){const e=u.Zb();u.Bb(2),u.fc("dataSource",e.receiptAddressCompanySource)("searchEnabled",!0)}}function D(e,t){1&e&&u.Nb(0,"a",59),2&e&&u.fc("innerHTML",t.$implicit.description,u.qc)}function R(e,t){1&e&&u.Nb(0,"div",59),2&e&&u.fc("innerHTML",t.$implicit,u.qc)}function L(e,t){if(1&e){const e=u.Rb();u.Qb(0,"div"),u.Qb(1,"div",54),u.Qb(2,"ng-autocomplete",56),u.Xb("selected",function(t){return u.pc(e),u.Zb().onSelectReceiptAddressEvent(t)})("inputChanged",function(t){return u.pc(e),u.Zb().onChangeSearchReceiptAddress(t)})("inputCleared",function(t){return u.pc(e),u.Zb().onClearReceiptAddressEvent(t)}),u.Pb(),u.tc(3,D,1,1,"ng-template",null,57,u.uc),u.tc(5,R,1,1,"ng-template",null,58,u.uc),u.Pb(),u.Pb()}if(2&e){const e=u.mc(4),t=u.mc(6),i=u.Zb();u.Bb(2),u.fc("data",i.receiptAddressSource)("searchKeyword",i.keyword)("initialValue",i.formData.receiptAddress)("customFilter",i.onCustomFilter)("debounceTime",190)("itemTemplate",e)("notFoundTemplate",t)}}function V(e,t){1&e&&u.Nb(0,"a",59),2&e&&u.fc("innerHTML",t.$implicit.description,u.qc)}function K(e,t){1&e&&u.Nb(0,"div",59),2&e&&u.fc("innerHTML",t.$implicit,u.qc)}function z(e,t){if(1&e){const e=u.Rb();u.Qb(0,"div"),u.Qb(1,"div",54),u.Qb(2,"ng-autocomplete",60,61),u.Xb("selected",function(t){return u.pc(e),u.Zb().onSelectShippingAddressEvent(t)})("inputChanged",function(t){return u.pc(e),u.Zb().onChangeSearchShippingAddress(t)})("inputCleared",function(t){return u.pc(e),u.Zb().onClearShippingAddressEvent(t)}),u.Pb(),u.tc(4,V,1,1,"ng-template",null,57,u.uc),u.tc(6,K,1,1,"ng-template",null,58,u.uc),u.Pb(),u.Pb()}if(2&e){const e=u.mc(5),t=u.mc(7),i=u.Zb();u.Bb(2),u.fc("data",i.shippingAddressSource)("searchKeyword",i.keyword)("customFilter",i.onCustomFilter)("debounceTime",190)("itemTemplate",e)("notFoundTemplate",t)}}function j(e,t){1&e&&(u.Qb(0,"div"),u.Nb(1,"div",62),u.Pb())}const H=function(e){return{items:e,displayExpr:"name",valueExpr:"id",searchEnabled:!0,disabled:!0}},X=function(e){return{items:e,displayExpr:"name",valueExpr:"id",searchEnabled:!0}},G=function(){return{format:"#,##0"}},$=function(e){return{value:e}},U=function(){return{height:70}},Z=function(){return[15,30,45]};let q=(()=>{class e{constructor(e,t,i,r,n,a,h,u,p,b,m,g,f,v,S,x){var y;this.orderServiceProxy=e,this.lookupServiceProxy=t,this.vehicleService=i,this.messageService=r,this.productContractServiceProxy=n,this.contractServiceProxy=a,this.productOrderServiceProxy=h,this.customerServiceProxy=u,this.staffService=p,this.router=b,this.productServiceProxy=m,this.productService=g,this.mapService=f,this.stringUtils=v,this.appAuthService=S,this.customerService=x,this.estimateTime=o(),this.markerReceipt={lat:0,lng:0,isShipping:!1,icon:c.a.icon.ReceiptAddress},this.markerShipping={lat:0,lng:0,isShipping:!0,icon:c.a.icon.ShippingAddress},this.markerPositions=[],this.tempSelectedProduct=[],this.isStay=!1,this.keyword="description",this.isSelectedFromCompanyAddress=!1,this.receiptAddressSource=[],this.shippingAddressSource=[],this.receiptAddressCompanySource=[],this.ListLatLogStaff=[],this.subject=new s.a,this.isAllowAddOrEdit=!0,this.isProcessing=!1,this.onCustomFilter=(e,t)=>{var i=this.stringUtils.removeAccents(t).toLocaleLowerCase();return e.filter(e=>this.stringUtils.removeAccents(e.description).toLowerCase().includes(i))},this.userLogin=this.appAuthService.getStaffLogin(),this.isAllowAddOrEdit=(null===(y=this.userLogin)||void 0===y?void 0:y.roleId)!=c.a.EmployeeRole.CustomerService,this.receiptAddressCompanySource=c.a.ReceiveAddress,this.lookupServiceProxy.orderStatus().subscribe(e=>{this.lookupOrderStatus=e}),this.lookupServiceProxy.paymentMethod().subscribe(e=>{this.lookupPaymentMethod=e}),this.lookupContract=new l.a({load:e=>this.contractServiceProxy.getAll(e.pageNo,e.pageSize,null,null,null,null,null,e.loadOptions.searchValue,null,null,null)}),this.lookupCustomer=new l.a({load:e=>{var t;if(null===(t=this.customer)||void 0===t?void 0:t.id){var i={data:[this.customer],totalCount:1};return Object(d.a)(i)}return this.customerServiceProxy.getAll(e.pageNo,e.pageSize,null,null,e.loadOptions.searchValue)}}),this.staffService.getLookup(c.a.EmployeeRole.Shipper,!0).subscribe(e=>{this.lookupStaff=e.result,this.getLatLngOfStaffShipper().then(e=>{e&&this.drawMultipleMarker(e)})}),this.staffService.getLookup(c.a.EmployeeRole.Sale,!0).subscribe(e=>{this.lookupSale=e.result}),this.lookupServiceProxy.priority().subscribe(e=>{this.lookupPriority=e}),this.vehicleService.getLookup(!0).subscribe(e=>{this.lookupVehicle=e.result}),this.lookupServiceProxy.orderType().subscribe(e=>{this.lookupOrderType=e}),this.product=new l.a({load:e=>this.productService.getAll(e.mapFrom())})}getRandomInRange(e,t,i){return 1*(Math.random()*(t-e)+e).toFixed(i)}getLatLngOfStaffShipper(){return Object(a.a)(this,void 0,void 0,function*(){return this.lookupStaff.forEach(e=>{0!=e.latitude&&0!=e.longtitude&&this.ListLatLogStaff.push({lat:e.latitude,lng:e.longtitude,icon:e.image?e.image:c.a.icon.Shipper,name:e.name})}),this.ListLatLogStaff.length>0&&this.ListLatLogStaff})}drawMultipleMarker(e){this.mapService.addMarkerShipper(e)}getRandomLatLon(){return{lat:this.getRandomInRange(-90,90,5),lng:this.getRandomInRange(-180,180,5),icon:"../../assets/image/icons/delivery-location.svg"}}ngOnInit(){this.formData=new h.x,this.formData.shippingAddress="",this.formData.receiptAddress="",this.formData.statusId=1,this.formData.paymentMethodId=2,this.formData.priorityId=2}ngAfterViewInit(){this.mapService.setOrginalDistination(void 0,void 0),this.mapService.buildMap()}onSubmit(e){return Object(a.a)(this,void 0,void 0,function*(){e.preventDefault();const t=new h.k;if(t.init(this.formData),t.latitudeShippingAddress=this.markerShipping.lat,t.longtitudeShippingAddress=this.markerShipping.lng,t.latitudeReceiptAddress=this.markerReceipt.lat,t.longtitudeReceiptAddress=this.markerReceipt.lng,t.estimateMinuteMoving=this.estimateTimeMoving,t.orderTime=o(),t.estimateTime=this.estimateTime,t.staffId&&null==t.waitingConfirmUpdatedTime&&(t.waitingConfirmUpdatedTime=o()),t.statusId==c.a.StatusOrder.Finished&&null==t.finishedUpdatedTime){if(!t.staffId)return void this.messageService.error("C\u1ea7n ch\u1ecdn nh\xe2n vi\xean giao nh\u1eadn!");t.finishedUpdatedTime=o()}else t.finishedUpdatedTime=void 0;null!=this.formData.vehicleId&&null!=this.formData.vehicleId||!this.formData.staffId?null==t.receiptAddress||null==t.shippingAddress||t.receiptAddress.trim().length<1||t.shippingAddress.trim().length<1?this.messageService.error("\u0110\u1ecba ch\u1ec9 ho\u1eb7c kho\u1ea3ng c\xe1ch, th\u1eddi gian d\u1ef1 ki\u1ebfn ch\u01b0a \u0111\u01b0\u1ee3c t\xednh."):this.isProcessing||(this.isProcessing=!0,this.orderServiceProxy.create(t).subscribe(e=>Object(a.a)(this,void 0,void 0,function*(){this.messageService.success("T\u1ea1o \u0111\u01a1n h\xe0ng th\xe0nh c\xf4ng"),this.formData=new h.x,(this.tempSelectedProduct.length>0||!this.tempSelectedProduct)&&this.tempSelectedProduct.forEach(i=>Object(a.a)(this,void 0,void 0,function*(){var r;const n=new h.n;n.orderId=e,n.productId=t.contractId?i.productId:i.id,n.quantity=i.unitQuantity,n.unitPrice=null!==(r=i.unitPrice)&&void 0!==r?r:0,yield this.createProduct(n)})),0==this.isStay?yield this.router.navigate(["/app/orders/list"]):this.router.navigateByUrl("/app/orders/list",{skipLocationChange:!0}).then(()=>{this.router.navigate(["/app/orders/create"])}),this.isProcessing=!1}),e=>{this.isProcessing=!1,this.messageService.error(e.error.message?e.error.message:"Th\xeam m\u1edbi kh\xf4ng th\xe0nh c\xf4ng!")})):this.messageService.error("C\u1ea7n ch\u1ecdn ph\u01b0\u01a1ng ti\u1ec7n v\u1eadn chuy\u1ec3n cho nh\xe2n vi\xean giao h\xe0ng.")})}navigateToDetail(e){return new Promise(t=>{this.router.navigate(["./app/orders/detail",e])})}onChangeContract(e){return Object(a.a)(this,void 0,void 0,function*(){const t=e.value;e.value||(this.customer=null,yield this.lookupContract.reload(),this.productOrderDataGrid.instance.refresh(),this.product=new l.a({load:e=>this.productServiceProxy.getAll(e.pageNo,e.pageSize,e.loadOptions.searchValue,null,null)}));const i=yield this.getCustomerByContract(t);this.product=new l.a({load:e=>this.productContractServiceProxy.getAll(t,e.pageNo,e.pageSize)}),this.productOrderDataGrid.instance.refresh(),this.customer=new h.q,this.customer.id=i.customerId,this.customer.name=i.customerName,yield this.lookupCustomer.reload(),this.formData.customerId=i.customerId,this.formData.customerName=i.customerName})}clearFilter(e){this.productOrderDataGrid.instance.clearFilter()}getProductsByContract(e){return Object(a.a)(this,void 0,void 0,function*(){const t=yield this.addOrderQuantityIntoProductContract(e);return new Promise(e=>e(t))})}addOrderQuantityIntoProductContract(e){return Object(a.a)(this,void 0,void 0,function*(){const t=yield this.loadProductsByContract(e),i=[];return t.forEach(e=>{const t=Object.assign(Object.assign({},e),{orderQuantity:0});i.push(t)}),new Promise(e=>{e(i)})})}loadProductsByContract(e){return new Promise(t=>{this.productContractServiceProxy.getAll(e,1,15).toPromise().then(e=>{t(e.data)})})}onChangeStaff(e){e.value&&(this.formData.statusId=3)}getCustomerByContract(e){return new Promise(t=>{this.contractServiceProxy.get(e).toPromise().then(e=>{t(e)})})}onSelectionChanged(e){var t,i,r,n;if(e.currentSelectedRowKeys.length>0){const a=Object.assign(Object.assign({},e.currentSelectedRowKeys[0]),{unitQuantity:null!==(i=null===(t=e.currentSelectedRowKeys[0])||void 0===t?void 0:t.quantity)&&void 0!==i?i:0,unitPrice:this.formData.contractId?null===(r=e.currentSelectedRowKeys[0])||void 0===r?void 0:r.unitPrice:null===(n=e.currentSelectedRowKeys[0])||void 0===n?void 0:n.price});this.tempSelectedProduct.push(a)}if(e.currentDeselectedRowKeys.length>0){const t=this.tempSelectedProduct.indexOf(e.currentDeselectedRowKeys[0]);this.tempSelectedProduct.splice(t,1)}this.formData.price=e.selectedRowsData&&e.selectedRowsData.length>0?this.tempSelectedProduct.reduce((e,t)=>e+t.unitQuantity*t.unitPrice,0):0,this.formData.weight=e.selectedRowsData&&e.selectedRowsData.length>0?this.tempSelectedProduct.reduce((e,t)=>e+t.weight,0):0}createRouting(){0==this.markerReceipt.lng&&0==this.markerReceipt.lat||0==this.markerShipping.lng&&0==this.markerShipping.lat||(this.mapService.calculateDistance(this.markerReceipt,this.markerShipping).subscribe(e=>{let t=e.rows[0].elements.filter(e=>"OK"==e.status);t&&(this.estimateTimeMoving=Math.round(parseFloat((t[0].duration.value/60).toFixed(2))),this.formData.distance=Math.round(t[0].distance.value/1e3*10)/10)}),this.mapService.directionMap(this.markerReceipt,this.markerShipping))}onChangeCustomer(e){if(e.value){let t=this.lookupCustomer.items().find(t=>t.id==e.value).name;this.customerService.getAddress({name:t}).subscribe(e=>{e.success&&(this.deliveryAddressCompanySource=e.result.filter(e=>null!=e&&""!=e).map(e=>({address:e})),this.shippingAddressSource=e.result.filter(e=>null!=e&&""!=e).map(e=>({description:e})),1==this.shippingAddressSource.length?(this.searchAddressAndAddMarker(this.shippingAddressSource[0].description),this.onSetQueryAutoComplete(this.shippingAddressSource[0].description)):(this.onSetQueryAutoComplete(""),this.mapService.removeMarker(),this.onClearShippingAddressEvent(void 0)))})}}createProduct(e){return new Promise(t=>{this.productOrderServiceProxy.create(e).toPromise().then(e=>{this.messageService.success("Th\xeam s\u1ea3n ph\u1ea9m th\xe0nh c\xf4ng."),t(!0)})})}onRowUpdated(e){this.selectedProducts.forEach(t=>{var i,r;t.unitPrice=null!==(i=e.key.unitPrice)&&void 0!==i?i:0,t.unitQuantity=null!==(r=e.key.unitQuantity)&&void 0!==r?r:0}),this.formData.price=this.tempSelectedProduct&&this.tempSelectedProduct.length>0?this.tempSelectedProduct.reduce((e,t)=>e+t.unitQuantity*t.unitPrice,0):0,this.formData.weight=this.tempSelectedProduct&&this.tempSelectedProduct.length>0?this.tempSelectedProduct.reduce((e,t)=>e+t.weight,0):0}onSelectCompanyReceiptAddressEvent(e){let t=c.a.ReceiveAddress.filter(t=>t.address==e.value);if(t.length>0){this.isSelectedFromCompanyAddress=!0,this.formData.receiptAddress=e.value;var i=t[0].location;this.markerReceipt.lng=i.lng,this.markerReceipt.lat=i.lat,this.markerReceipt.isShipping=!1,this.markerPositions.map(e=>(0==e.isShipping&&(e.lng=i.lng,e.lat=i.lat),e)),0==this.markerPositions.filter(e=>0==e.isShipping).length&&this.markerPositions.push(this.markerReceipt),this.mapService.removeMarker(),this.mapService.addMarker(this.markerPositions),this.createRouting()}}onSetQueryAutoComplete(e){this.selectShippingAutocomplete.query=e}onSelectReceiptAddressEvent(e){this.isSelectedFromCompanyAddress||(this.isSelectedFromCompanyAddress=!1,null!=e.description&&(this.formData.receiptAddress=e.description),null!=e.place_id&&this.mapService.getPlaceDetail(e.place_id).subscribe(e=>{if(null!=e){var t=e.result.geometry.location;this.markerReceipt.lng=t.lng,this.markerReceipt.lat=t.lat,this.markerReceipt.isShipping=!1,this.markerPositions.map(e=>(0==e.isShipping&&(e.lng=t.lng,e.lat=t.lat),e)),0==this.markerPositions.filter(e=>0==e.isShipping).length&&this.markerPositions.push(this.markerReceipt),this.mapService.removeMarker(),this.mapService.addMarker(this.markerPositions),this.createRouting()}}))}onClearReceiptAddressEvent(e){this.formData.receiptAddress=""}onClearShippingAddressEvent(e){this.formData.shippingAddress=""}onChangeSearchReceiptAddress(e){this.isSelectedFromCompanyAddress=!1,this.mapService.searchPlaces(e).subscribe(e=>{this.receiptAddressSource=e.predictions})}onSelectShippingAddressEvent(e){this.formData.shippingAddress=e.description,null!=e.place_id?this.mapService.getPlaceDetail(e.place_id).subscribe(e=>{var t=e.result.geometry.location;this.markerShipping.lng=t.lng,this.markerShipping.lat=t.lat,this.markerShipping.isShipping=!0,this.markerPositions.map(e=>(e.isShipping&&(e.lng=t.lng,e.lat=t.lat),e)),0==this.markerPositions.filter(e=>e.isShipping).length&&this.markerPositions.push(this.markerShipping),this.mapService.removeMarker(),this.mapService.addMarker(this.markerPositions),this.createRouting()}):this.searchAddressAndAddMarker(e.description)}searchAddressAndAddMarker(e){e&&(this.formData.shippingAddress=e,this.mapService.searchPlaces(e).subscribe(e=>{this.shippingAddressSource=e.predictions,this.mapService.getPlaceDetail(this.shippingAddressSource[0].place_id).subscribe(e=>{var t=e.result.geometry.location;this.markerShipping.lng=t.lng,this.markerShipping.lat=t.lat,this.markerShipping.isShipping=!0,0==this.markerPositions.filter(e=>e.isShipping).length&&this.markerPositions.push(this.markerShipping),this.mapService.removeMarker(),this.mapService.addMarker(this.markerPositions),this.createRouting()})}))}onChangeSearchShippingAddress(e){this.mapService.searchPlaces(e).subscribe(e=>{this.shippingAddressSource=e.predictions})}}return e.\u0275fac=function(t){return new(t||e)(u.Mb(h.J),u.Mb(h.E),u.Mb(p.a),u.Mb(b.a),u.Mb(h.K),u.Mb(h.d),u.Mb(h.N),u.Mb(h.r),u.Mb(m.a),u.Mb(g.b),u.Mb(h.O),u.Mb(v),u.Mb(S.a),u.Mb(x.a),u.Mb(y.a),u.Mb(P.a))},e.\u0275cmp=u.Gb({type:e,selectors:[["app-order-create"]],viewQuery:function(e,t){if(1&e&&(u.zc(Q,1),u.zc(I,1),u.zc(_,1)),2&e){let e;u.lc(e=u.Yb())&&(t.productOrderDataGrid=e.first),u.lc(e=u.Yb())&&(t.customerLookup=e.first),u.lc(e=u.Yb())&&(t.selectShippingAutocomplete=e.first)}},decls:97,vars:131,consts:[[1,"card","custom-card",2,"margin-bottom","5px"],[1,"card-header"],[1,"card-body"],["action","",3,"submit"],["id","formAppointmentFill","validationGroup","createOrderForm",3,"readOnly","formData","showColonAfterLabel","showValidationSummary"],["itemType","group","caption","",3,"colCount"],["text","L\u01b0u","type","success","icon","fa fa-floppy-o","validationGroup","createOrderForm",2,"margin-right","10px","background-color","#12007c","font-weight","bold","padding","2px",3,"disabled","useSubmitBehavior","onClick"],["text","L\xe0m m\u1edbi","type","success","icon","fa fa-floppy-o","validationGroup","createOrderForm",2,"margin-right","10px","background-color","#12007c","font-weight","bold","padding","2px",3,"disabled","onClick"],["text","L\u01b0u v\xe0 gi\u1eef","type","success","icon","fa fa-floppy-o","validationGroup","createOrderForm",2,"margin-right","10px","background-color","#12007c","font-weight","bold","padding","2px",3,"disabled","useSubmitBehavior","onClick"],["itemType","group","caption","Th\xf4ng tin ch\xednh",3,"colCount"],["itemType","group","caption","",3,"colSpan","colCount"],[3,"colSpan"],["displayExpr","name","valueExpr","id",3,"dataSource","value","searchEnabled","valueChange","onValueChanged"],[3,"text"],["dataField","codeDeliveryBill",3,"colSpan"],["type","required","message","Tr\u01b0\u1eddng n\xe0y l\xe0 b\u1eaft bu\u1ed9c"],["dataField","customerId",3,"colSpan"],["displayExpr","name","valueExpr","id","searchExpr","name",3,"dataSource","value","searchEnabled","onValueChanged","valueChange"],["dataField","receiverId","editorType","dxSelectBox",3,"colSpan","editorOptions"],["dataField","orderTypeId","editorType","dxSelectBox",3,"colSpan","editorOptions"],["dataField","followers","editorType","dxTagBox",3,"colSpan","editorOptions"],["type","datetime","displayFormat","dd/MM/yyyy HH:mm",3,"value","valueChange"],["dataField","price","editorType","dxNumberBox",3,"colSpan","editorOptions"],["dataField","statusId","editorType","dxSelectBox",3,"colSpan","editorOptions"],["dataField","paymentMethodId","editorType","dxSelectBox",3,"colSpan","editorOptions"],["dataField","priorityId","editorType","dxSelectBox",3,"colSpan","editorOptions"],["dataField","vehicleId","editorType","dxSelectBox",3,"colSpan","editorOptions"],["dataField","distance","editorType","dxNumberBox",3,"colSpan","disabled"],["dataField","estimateTimeMoving","editorType","dxNumberBox",3,"colSpan","disabled","editorOptions"],["dataField","weight","editorType","dxNumberBox",3,"colSpan"],[3,"colSpan","disabled"],["dataField","note","editorType","dxTextArea",3,"colSpan","editorOptions"],["action",""],["id","form",3,"readOnly","formData","showColonAfterLabel","showValidationSummary"],["itemType","group","caption","S\u1ea3n ph\u1ea9m"],["itemType","group",3,"colCount"],["itemType","group",3,"colSpan"],[3,"showColumnLines","rowAlternationEnabled","hoverStateEnabled","remoteOperations","dataSource","columnAutoWidth","showBorders","selectedRowKeys","selectedRowKeysChange","onSelectionChanged"],["productOrderDataGrid",""],["mode","multiple"],[3,"visible"],[3,"pageSize"],[3,"showPageSizeSelector","allowedPageSizes","showInfo"],["dataField","name","caption","S\u1ea3n ph\u1ea9m",3,"allowEditing","filterValue","filterValueChange"],["dataField","quantity","caption","S\u1ed1 l\u01b0\u01a1ng","format","#,##0"],["dataField","price","caption","Gi\xe1 ti\u1ec1n","format","#,##0",4,"ngIf"],["dataField","unitPrice","caption","Gi\xe1 ti\u1ec1n","format","#,##0",4,"ngIf"],[3,"showColumnLines","rowAlternationEnabled","hoverStateEnabled","remoteOperations","dataSource","columnAutoWidth","showBorders","onRowUpdated"],["mode","cell",3,"allowUpdating"],["dataField","unitQuantity","caption","S\u1ed1 l\u01b0\u01a1ng"],["dataField","unitPrice","caption","Gi\xe1 ti\u1ec1n","format","#,##0"],["itemType","group","caption",""],[4,"dxTemplate"],["dataField","price","caption","Gi\xe1 ti\u1ec1n","format","#,##0"],[1,"ng-autocomplete"],["displayExpr","address","valueExpr","address","placeholder","Ch\u1ecdn nhanh \u0111\u1ecba ch\u1ec9 l\u1ea5y h\xe0ng",3,"dataSource","searchEnabled","onValueChanged"],["required","","placeholder","\u0110\u1ecba ch\u1ec9 l\u1ea5y h\xe0ng",3,"data","searchKeyword","initialValue","customFilter","debounceTime","itemTemplate","notFoundTemplate","selected","inputChanged","inputCleared"],["itemTemplate",""],["notFoundTemplate",""],[3,"innerHTML"],["required","","placeholder","\u0110\u1ecba ch\u1ec9 giao h\xe0ng",3,"data","searchKeyword","customFilter","debounceTime","itemTemplate","notFoundTemplate","selected","inputChanged","inputCleared"],["selectShippingAutocomplete",""],["id","map",1,"map-container"]],template:function(e,t){1&e&&(u.Qb(0,"div",0),u.Nb(1,"div",1),u.Qb(2,"div",2),u.Qb(3,"form",3),u.Xb("submit",function(e){return t.onSubmit(e)}),u.Qb(4,"dx-form",4),u.Qb(5,"dxi-item",5),u.Qb(6,"dx-button",6),u.Xb("onClick",function(){return t.isStay=!1}),u.Pb(),u.Qb(7,"dx-button",7),u.Xb("onClick",function(e){return t.clearFilter(e)}),u.Pb(),u.Qb(8,"dx-button",8),u.Xb("onClick",function(){return t.isStay=!0}),u.Pb(),u.Pb(),u.Qb(9,"dxi-item",9),u.Qb(10,"dxi-item",10),u.Qb(11,"dxi-item",11),u.Qb(12,"dx-select-box",12),u.Xb("valueChange",function(e){return t.formData.contractId=e})("onValueChanged",function(e){return t.onChangeContract(e)}),u.Pb(),u.Nb(13,"dxo-label",13),u.Pb(),u.Qb(14,"dxi-item",14),u.Nb(15,"dxi-validation-rule",15),u.Nb(16,"dxo-label",13),u.Pb(),u.Qb(17,"dxi-item",16),u.Qb(18,"dx-select-box",17),u.Xb("onValueChanged",function(e){return t.onChangeCustomer(e)})("valueChange",function(e){return t.formData.customerId=e}),u.Pb(),u.Nb(19,"dxo-label",13),u.Nb(20,"dxi-validation-rule",15),u.Pb(),u.Qb(21,"dxi-item",18),u.Nb(22,"dxo-label",13),u.Pb(),u.Qb(23,"dxi-item",19),u.Nb(24,"dxo-label",13),u.Nb(25,"dxi-validation-rule",15),u.Pb(),u.Qb(26,"dxi-item",20),u.Nb(27,"dxo-label",13),u.Nb(28,"dxi-validation-rule",15),u.Pb(),u.Qb(29,"dxi-item",11),u.Qb(30,"dx-select-box",12),u.Xb("valueChange",function(e){return t.formData.staffId=e})("onValueChanged",function(e){return t.onChangeStaff(e)}),u.Pb(),u.Nb(31,"dxo-label",13),u.Pb(),u.Qb(32,"dxi-item",11),u.Qb(33,"dx-date-box",21),u.Xb("valueChange",function(e){return t.estimateTime=e}),u.Pb(),u.Nb(34,"dxo-label",13),u.Pb(),u.Qb(35,"dxi-item",22),u.Nb(36,"dxo-label",13),u.Nb(37,"dxi-validation-rule",15),u.Pb(),u.Qb(38,"dxi-item",23),u.Nb(39,"dxo-label",13),u.Nb(40,"dxi-validation-rule",15),u.Pb(),u.Qb(41,"dxi-item",24),u.Nb(42,"dxo-label",13),u.Pb(),u.Qb(43,"dxi-item",25),u.Nb(44,"dxo-label",13),u.Nb(45,"dxi-validation-rule",15),u.Pb(),u.Qb(46,"dxi-item",26),u.Nb(47,"dxo-label",13),u.Pb(),u.Qb(48,"dxi-item",27),u.Nb(49,"dxo-label",13),u.Pb(),u.Qb(50,"dxi-item",28),u.Nb(51,"dxo-label",13),u.Pb(),u.Qb(52,"dxi-item",29),u.Nb(53,"dxo-label",13),u.Pb(),u.Nb(54,"dxi-item",30),u.Qb(55,"dxi-item",31),u.Nb(56,"dxo-label",13),u.Pb(),u.Qb(57,"dxi-item",11),u.Qb(58,"div",0),u.Nb(59,"div",1),u.Qb(60,"div",2),u.Qb(61,"form",32),u.Qb(62,"dx-form",33),u.Qb(63,"dxi-item",34),u.Qb(64,"dxi-item",35),u.Qb(65,"dxi-item",36),u.Qb(66,"dx-data-grid",37,38),u.Xb("selectedRowKeysChange",function(e){return t.selectedProducts=e})("onSelectionChanged",function(e){return t.onSelectionChanged(e)}),u.Nb(68,"dxo-selection",39),u.Nb(69,"dxo-filter-row",40),u.Nb(70,"dxo-paging",41),u.Nb(71,"dxo-pager",42),u.Qb(72,"dxi-column",43),u.Xb("filterValueChange",function(e){return t.nameProductFilter=e}),u.Pb(),u.Nb(73,"dxi-column",44),u.tc(74,M,1,0,"dxi-column",45),u.tc(75,F,1,0,"dxi-column",46),u.Pb(),u.Pb(),u.Qb(76,"dxi-item",36),u.Qb(77,"dx-data-grid",47,38),u.Xb("onRowUpdated",function(e){return t.onRowUpdated(e)}),u.Nb(79,"dxo-selection",39),u.Nb(80,"dxo-filter-row",40),u.Nb(81,"dxo-editing",48),u.Nb(82,"dxo-paging",41),u.Nb(83,"dxo-pager",42),u.Qb(84,"dxi-column",43),u.Xb("filterValueChange",function(e){return t.nameProductFilter=e}),u.Pb(),u.Nb(85,"dxi-column",49),u.Nb(86,"dxi-column",50),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(87,"dxi-item",51),u.Qb(88,"dxi-item"),u.tc(89,N,3,2,"div",52),u.Pb(),u.Qb(90,"dxi-item"),u.tc(91,L,7,7,"div",52),u.Pb(),u.Qb(92,"dxi-item"),u.tc(93,z,8,6,"div",52),u.Pb(),u.Qb(94,"dxi-item"),u.tc(95,j,2,0,"div",52),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Nb(96,"div",2),u.Pb()),2&e&&(u.Bb(4),u.fc("readOnly",!1)("formData",t.formData)("showColonAfterLabel",!0)("showValidationSummary",!1),u.Bb(1),u.fc("colCount",2),u.Bb(1),u.fc("disabled",!t.isAllowAddOrEdit||t.isProcessing)("useSubmitBehavior",!0),u.Bb(1),u.fc("disabled",!t.isAllowAddOrEdit||t.isProcessing),u.Bb(1),u.fc("disabled",!t.isAllowAddOrEdit||t.isProcessing)("useSubmitBehavior",!0),u.Bb(1),u.fc("colCount",2),u.Bb(1),u.fc("colSpan",1)("colCount",4),u.Bb(1),u.fc("colSpan",2),u.Bb(1),u.fc("dataSource",t.lookupContract)("value",t.formData.contractId)("searchEnabled",!0),u.Bb(1),u.fc("text","H\u1ee3p \u0111\u1ed3ng"),u.Bb(1),u.fc("colSpan",2),u.Bb(2),u.fc("text","Phi\u1ebfu xu\u1ea5t kho"),u.Bb(1),u.fc("colSpan",4),u.Bb(1),u.fc("dataSource",t.lookupCustomer)("value",t.formData.customerId)("searchEnabled",!0),u.Bb(1),u.fc("text","Kh\xe1ch h\xe0ng"),u.Bb(2),u.fc("colSpan",2)("editorOptions",u.ic(111,H,t.lookupCustomer)),u.Bb(1),u.fc("text","Ng\u01b0\u1eddi nh\u1eadn"),u.Bb(1),u.fc("colSpan",2)("editorOptions",u.ic(113,X,t.lookupOrderType)),u.Bb(1),u.fc("text","Lo\u1ea1i \u0111\u01a1n h\xe0ng"),u.Bb(2),u.fc("colSpan",2)("editorOptions",u.ic(115,X,t.lookupSale)),u.Bb(1),u.fc("text","Ng\u01b0\u1eddi ph\u1ee5 tr\xe1ch"),u.Bb(2),u.fc("colSpan",2),u.Bb(1),u.fc("dataSource",t.lookupStaff)("value",t.formData.staffId)("searchEnabled",!0),u.Bb(1),u.fc("text","Nh\xe2n vi\xean giao h\xe0ng"),u.Bb(1),u.fc("colSpan",2),u.Bb(1),u.fc("value",t.estimateTime),u.Bb(1),u.fc("text","Giao h\xe0ng d\u1ef1 ki\u1ebfn"),u.Bb(1),u.fc("colSpan",2)("editorOptions",u.hc(117,G)),u.Bb(1),u.fc("text","Gi\xe1"),u.Bb(2),u.fc("colSpan",2)("editorOptions",u.ic(118,X,t.lookupOrderStatus)),u.Bb(1),u.fc("text","Tr\u1ea1ng th\xe1i"),u.Bb(2),u.fc("colSpan",2)("editorOptions",u.ic(120,X,t.lookupPaymentMethod)),u.Bb(1),u.fc("text","Ph\u01b0\u01a1ng th\u1ee9c thanh to\xe1n"),u.Bb(1),u.fc("colSpan",2)("editorOptions",u.ic(122,X,t.lookupPriority)),u.Bb(1),u.fc("text","\u01afu ti\xean"),u.Bb(2),u.fc("colSpan",2)("editorOptions",u.ic(124,X,t.lookupVehicle)),u.Bb(1),u.fc("text","Ph\u01b0\u01a1ng ti\u1ec7n"),u.Bb(1),u.fc("colSpan",2)("disabled",!0),u.Bb(1),u.fc("text","Kho\u1ea3ng c\xe1ch (km)"),u.Bb(1),u.fc("colSpan",2)("disabled",!0)("editorOptions",u.ic(126,$,t.estimateTimeMoving)),u.Bb(1),u.fc("text","Th\u1eddi gian \u0111i d\u1ef1 ki\u1ebfn (ph\xfat)"),u.Bb(1),u.fc("colSpan",2),u.Bb(1),u.fc("text","Tr\u1ecdng l\u01b0\u1ee3ng"),u.Bb(1),u.fc("colSpan",2)("disabled",!0),u.Bb(1),u.fc("colSpan",4)("editorOptions",u.hc(128,U)),u.Bb(1),u.fc("text","Ghi ch\xfa"),u.Bb(1),u.fc("colSpan",4),u.Bb(5),u.fc("readOnly",!1)("formData",t)("showColonAfterLabel",!0)("showValidationSummary",!1),u.Bb(2),u.fc("colCount",2),u.Bb(1),u.fc("colSpan",1),u.Bb(1),u.fc("showColumnLines",!1)("rowAlternationEnabled",!0)("hoverStateEnabled",!0)("remoteOperations",!0)("dataSource",t.product)("columnAutoWidth",!0)("showBorders",!0)("selectedRowKeys",t.selectedProducts),u.Bb(3),u.fc("visible",!0),u.Bb(1),u.fc("pageSize",15),u.Bb(1),u.fc("showPageSizeSelector",!0)("allowedPageSizes",u.hc(129,Z))("showInfo",!0),u.Bb(1),u.fc("allowEditing",!1)("filterValue",t.nameProductFilter),u.Bb(2),u.fc("ngIf",!t.formData.contractId),u.Bb(1),u.fc("ngIf",t.formData.contractId),u.Bb(1),u.fc("colSpan",1),u.Bb(1),u.fc("showColumnLines",!1)("rowAlternationEnabled",!0)("hoverStateEnabled",!0)("remoteOperations",!0)("dataSource",t.tempSelectedProduct)("columnAutoWidth",!0)("showBorders",!0),u.Bb(3),u.fc("visible",!0),u.Bb(1),u.fc("allowUpdating",!0),u.Bb(1),u.fc("pageSize",15),u.Bb(1),u.fc("showPageSizeSelector",!0)("allowedPageSizes",u.hc(130,Z))("showInfo",!0),u.Bb(1),u.fc("allowEditing",!1)("filterValue",t.nameProductFilter))},directives:[r.i,r.e,r.f,C.a,B.k,O.a,w.a,B.lb,B.A,k.a,A.a,B.Hb,B.W,B.yb,B.wb,B.f,n.j,B.P,T.d,E.a],styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:100%;min-height:500px}#geocoder-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{min-width:50%;margin-left:25%}.ng-autocomplete[_ngcontent-%COMP%]{width:100%}"]}),e})(),W=(()=>{class e{constructor(e){this.http=e,this.baseUrl=c.a.remoteVTHealthcareShipperServiceBaseUrl}getImages(e){return this.http.get(this.baseUrl+`/api/v1/Order/${e}/Images`)}}return e.\u0275fac=function(t){return new(t||e)(u.Ub(f.b))},e.\u0275prov=u.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Y=i("xbeL");function J(e,t){if(1&e){const e=u.Rb();u.Qb(0,"div",1),u.Qb(1,"div",2),u.Xb("click",function(){return u.pc(e),u.Zb().close.emit()}),u.Pb(),u.Nb(2,"img",3),u.Pb()}if(2&e){const e=u.Zb();u.Bb(2),u.fc("src",e.imageURL,u.rc)}}let ee=(()=>{class e{constructor(){this.close=new u.n}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Gb({type:e,selectors:[["app-viewer-image"]],inputs:{open:"open",imageURL:"imageURL"},outputs:{close:"close"},decls:1,vars:1,consts:[["class","viewer-container",4,"ngIf"],[1,"viewer-container"],[1,"viewer-content",3,"click"],["alt","H\xecnh \u1ea3nh",1,"main-img",3,"src"]],template:function(e,t){1&e&&u.tc(0,J,3,1,"div",0),2&e&&u.fc("ngIf",t.open)},directives:[n.j],styles:[".viewer-container[_ngcontent-%COMP%]{position:fixed;left:0;top:0;width:100%;height:100%;z-index:9999999}.viewer-content[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;background-color:hsla(40,4%,73%,.541);z-index:99;cursor:pointer}.close-button[_ngcontent-%COMP%]{left:90%;top:10%;font-size:18px;font-family:Arial,sans-serif;color:#fff;background-color:red;padding:7px;z-index:9999999}.close-button[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{position:absolute;cursor:pointer}img[_ngcontent-%COMP%]{z-index:999999;display:block;max-height:100%;max-width:100%;top:50%;left:50%;transform:translate(-50%,-50%)}"]}),e})();const te=["productOrderDataGrid"],ie=["feedbackDataGrid"],re=["orderStatusLookup"],ne=["selectShippingAutocomplete"],ae=["receiptAddressAutocomplete"];function oe(e,t){if(1&e){const e=u.Rb();u.Qb(0,"div"),u.Qb(1,"dx-select-box",64),u.Xb("valueChange",function(t){return u.pc(e),u.Zb(2).detailOrder.contractId=t})("onValueChanged",function(t){return u.pc(e),u.Zb(2).onChangeContract(t)}),u.Pb(),u.Pb()}if(2&e){const e=u.Zb(2);u.Bb(1),u.fc("dataSource",e.lookupContract)("value",e.detailOrder.contractId)("searchEnabled",!0)}}function se(e,t){if(1&e){const e=u.Rb();u.Qb(0,"div"),u.Qb(1,"dx-select-box",65),u.Xb("onValueChanged",function(t){return u.pc(e),u.Zb(2).onChangeCustomer(t)})("valueChange",function(t){return u.pc(e),u.Zb(2).detailOrder.customerId=t}),u.Pb(),u.Pb()}if(2&e){const e=u.Zb(2);u.Bb(1),u.fc("dataSource",e.lookupCustomer)("value",e.detailOrder.customerId)("searchEnabled",!0)}}function de(e,t){if(1&e){const e=u.Rb();u.Qb(0,"dxi-item",12),u.Qb(1,"dx-select-box",66),u.Xb("valueChange",function(t){return u.pc(e),u.Zb(2).detailOrder.cancelReasonId=t}),u.Pb(),u.Nb(2,"dxo-label",10),u.Pb()}if(2&e){const e=u.Zb(2);u.fc("colSpan",2),u.Bb(1),u.fc("dataSource",e.lookupReasonCancel)("value",e.detailOrder.cancelReasonId)("searchEnabled",!0),u.Bb(1),u.fc("text","L\xfd do hu\u1ef7 \u0111\u01a1n")}}const ce=function(){return{height:70}};function le(e,t){1&e&&(u.Qb(0,"dxi-item",67),u.Nb(1,"dxo-label",10),u.Pb()),2&e&&(u.fc("colSpan",2)("editorOptions",u.hc(3,ce)),u.Bb(1),u.fc("text","Hu\u1ef7 \u0111\u01a1n"))}function he(e,t){if(1&e){const e=u.Rb();u.Qb(0,"div",68),u.Qb(1,"img",69),u.Xb("click",function(){u.pc(e);const i=t.$implicit;return u.Zb(2).ClickviewerImageOpen(i.image)}),u.Pb(),u.Pb()}if(2&e){const e=t.$implicit;u.Bb(1),u.gc("src",e.image,u.rc)}}function ue(e,t){if(1&e){const e=u.Rb();u.Qb(0,"div"),u.Qb(1,"div",70),u.Qb(2,"dx-select-box",71),u.Xb("onValueChanged",function(t){return u.pc(e),u.Zb(2).onSelectCompanyReceiptAddressEvent(t)}),u.Pb(),u.Pb(),u.Pb()}if(2&e){const e=u.Zb(2);u.Bb(2),u.fc("dataSource",e.receiptAddressCompanySource)("readOnly",!e.isManagerorOperator)("searchEnabled",!0)}}function pe(e,t){1&e&&u.Nb(0,"a",76),2&e&&u.fc("innerHTML",t.$implicit.description,u.qc)}function be(e,t){1&e&&u.Nb(0,"div",76),2&e&&u.fc("innerHTML",t.$implicit,u.qc)}function me(e,t){if(1&e){const e=u.Rb();u.Qb(0,"div"),u.Qb(1,"div",70),u.Qb(2,"ng-autocomplete",72,73),u.Xb("selected",function(t){return u.pc(e),u.Zb(2).onSelectReceiptAddressEvent(t)})("inputChanged",function(t){return u.pc(e),u.Zb(2).onChangeSearchReceiptAddress(t)})("inputCleared",function(t){return u.pc(e),u.Zb(2).onClearReceiptAddressEvent(t)}),u.Pb(),u.tc(4,pe,1,1,"ng-template",null,74,u.uc),u.tc(6,be,1,1,"ng-template",null,75,u.uc),u.Pb(),u.Pb()}if(2&e){const e=u.mc(5),t=u.mc(7),i=u.Zb(2);u.Bb(2),u.fc("disabled",!i.isManagerorOperator)("searchKeyword",i.keyword)("data",i.receiptAddressSource)("initialValue",i.detailOrder.receiptAddress)("customFilter",i.onCustomFilter)("debounceTime",190)("itemTemplate",e)("notFoundTemplate",t)}}function ge(e,t){1&e&&u.Nb(0,"a",76),2&e&&u.fc("innerHTML",t.$implicit.description,u.qc)}function fe(e,t){1&e&&u.Nb(0,"div",76),2&e&&u.fc("innerHTML",t.$implicit,u.qc)}function ve(e,t){if(1&e){const e=u.Rb();u.Qb(0,"div"),u.Qb(1,"div",70),u.Qb(2,"ng-autocomplete",77,78),u.Xb("selected",function(t){return u.pc(e),u.Zb(2).onSelectShippingAddressEvent(t)})("inputChanged",function(t){return u.pc(e),u.Zb(2).onChangeSearchShippingAddress(t)})("inputCleared",function(t){return u.pc(e),u.Zb(2).onClearShippingAddressEvent(t)}),u.Pb(),u.tc(4,ge,1,1,"ng-template",null,74,u.uc),u.tc(6,fe,1,1,"ng-template",null,75,u.uc),u.Pb(),u.Pb()}if(2&e){const e=u.mc(5),t=u.mc(7),i=u.Zb(2);u.Bb(2),u.fc("disabled",!i.isManagerorOperator)("data",i.shippingAddressSource)("searchKeyword",i.keyword)("initialValue",i.detailOrder.shippingAddress)("customFilter",i.onCustomFilter)("debounceTime",190)("itemTemplate",e)("notFoundTemplate",t)}}function Se(e,t){1&e&&(u.Qb(0,"div"),u.Nb(1,"div",79),u.Pb())}const xe=function(e){return{items:e,displayExpr:"name",valueExpr:"id",searchEnabled:!0,disabled:!0}},ye=function(e){return{items:e,displayExpr:"name",valueExpr:"id",searchEnabled:!0}},Pe=function(){return{invalidDateMessage:"Ng\xe0y ph\u1ea3i theo \u0111\u1ecbnh d\u1ea1ng: MM/dd/yyyy",displayFormat:"dd/MM/yyyy"}},Ce=function(){return{format:"#,##0"}},Oe=function(e,t){return{items:e,displayExpr:"name",valueExpr:"id",searchEnabled:!0,disabled:t}},we=function(){return[10,20,30]},ke=function(){return[10,20,50,100,500]};function Ae(e,t){if(1&e){const e=u.Rb();u.Qb(0,"div",1),u.Nb(1,"div",2),u.Qb(2,"div",3),u.Qb(3,"form",4),u.Xb("submit",function(t){return u.pc(e),u.Zb().onFormSubmit(t)}),u.Qb(4,"dx-form",5),u.Qb(5,"dxi-item",6),u.Nb(6,"dx-button",7),u.Pb(),u.Qb(7,"dxi-item",8),u.Qb(8,"dxi-item",6),u.Qb(9,"dxi-item",9),u.Nb(10,"dxo-label",10),u.Pb(),u.Nb(11,"dxi-item",11),u.Qb(12,"dxi-item",12),u.tc(13,oe,2,3,"div",13),u.Nb(14,"dxo-label",10),u.Pb(),u.Qb(15,"dxi-item",14),u.Nb(16,"dxi-validation-rule",15),u.Nb(17,"dxo-label",10),u.Pb(),u.Qb(18,"dxi-item",16),u.tc(19,se,2,3,"div",13),u.Nb(20,"dxo-label",10),u.Nb(21,"dxi-validation-rule",15),u.Pb(),u.Qb(22,"dxi-item",17),u.Nb(23,"dxo-label",10),u.Pb(),u.Qb(24,"dxi-item",18),u.Nb(25,"dxo-label",10),u.Nb(26,"dxi-validation-rule",15),u.Pb(),u.Qb(27,"dxi-item",19),u.Nb(28,"dxo-label",10),u.Nb(29,"dxi-validation-rule",15),u.Pb(),u.Qb(30,"dxi-item",20),u.Nb(31,"dxo-label",10),u.Pb(),u.Qb(32,"dxi-item",21),u.Nb(33,"dxo-label",10),u.Pb(),u.Qb(34,"dxi-item",22),u.Nb(35,"dxi-validation-rule",15),u.Nb(36,"dxo-label",10),u.Pb(),u.Qb(37,"dxi-item",23),u.Nb(38,"dxo-label",10),u.Pb(),u.Qb(39,"dxi-item",24),u.Nb(40,"dxo-label",10),u.Pb(),u.Qb(41,"dxi-item",25),u.Nb(42,"dxo-label",10),u.Nb(43,"dxi-validation-rule",15),u.Pb(),u.Qb(44,"dxi-item",26),u.Nb(45,"dxo-label",10),u.Pb(),u.Qb(46,"dxi-item",27),u.Nb(47,"dxo-label",10),u.Pb(),u.Qb(48,"dxi-item",28),u.Nb(49,"dxo-label",10),u.Pb(),u.Qb(50,"dxi-item",29),u.Nb(51,"dxo-label",10),u.Pb(),u.Qb(52,"dxi-item",30),u.Nb(53,"dxo-label",10),u.Pb(),u.Qb(54,"dxi-item",31),u.Nb(55,"dxo-label",10),u.Pb(),u.Nb(56,"dxi-item",32),u.Qb(57,"dxi-item",33),u.Nb(58,"dxo-label",10),u.Pb(),u.tc(59,de,3,5,"dxi-item",34),u.tc(60,le,2,4,"dxi-item",35),u.Qb(61,"dxi-item",36),u.Qb(62,"dxi-tab",37),u.Qb(63,"div",1),u.Nb(64,"div",2),u.Qb(65,"div",3),u.Qb(66,"form",38),u.Qb(67,"dx-form",39),u.Qb(68,"dxi-item",40),u.Qb(69,"dxi-item",40),u.Nb(70,"dxi-item",6),u.Qb(71,"dxi-item",41),u.Qb(72,"dxi-item",12),u.Qb(73,"dx-data-grid",42,43),u.Xb("selectedRowKeysChange",function(t){return u.pc(e),u.Zb().selectedProducts=t})("onSelectionChanged",function(t){return u.pc(e),u.Zb().onSelectionChanged(t)}),u.Nb(75,"dxo-selection",44),u.Nb(76,"dxo-filter-row",45),u.Nb(77,"dxo-paging",46),u.Nb(78,"dxo-pager",47),u.Nb(79,"dxi-column",48),u.Nb(80,"dxi-column",49),u.Nb(81,"dxi-column",50),u.Pb(),u.Pb(),u.Qb(82,"dxi-item",12),u.Qb(83,"dx-data-grid",51,43),u.Xb("onRowUpdated",function(t){return u.pc(e),u.Zb().onRowUpdated(t)}),u.Nb(85,"dxo-filter-row",45),u.Nb(86,"dxo-selection",44),u.Nb(87,"dxo-editing",52),u.Nb(88,"dxo-paging",46),u.Nb(89,"dxo-pager",47),u.Nb(90,"dxi-column",48),u.Nb(91,"dxi-column",49),u.Nb(92,"dxi-column",50),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(93,"dxi-tab",53),u.Qb(94,"div",1),u.Nb(95,"div",2),u.Qb(96,"div",3),u.Qb(97,"form",38),u.Qb(98,"dx-form",39),u.Qb(99,"dxi-item",40),u.Qb(100,"dxi-item",40),u.Nb(101,"dxi-item",6),u.Qb(102,"dxi-item",54),u.Qb(103,"dxi-item"),u.Qb(104,"dx-data-grid",55,56),u.Nb(106,"dxo-paging",46),u.Nb(107,"dxo-pager",47),u.Nb(108,"dxi-column",57),u.Nb(109,"dxi-column",58),u.Nb(110,"dxi-column",59),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(111,"dxi-tab",60),u.Qb(112,"div",1),u.Nb(113,"div",2),u.Qb(114,"div",3),u.Qb(115,"div",61),u.tc(116,he,2,1,"div",62),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(117,"dxi-item",40),u.Qb(118,"dxi-item"),u.tc(119,ue,3,3,"div",13),u.Pb(),u.Qb(120,"dxi-item"),u.tc(121,me,8,8,"div",13),u.Pb(),u.Qb(122,"dxi-item"),u.tc(123,ve,8,8,"div",13),u.Pb(),u.Qb(124,"dxi-item"),u.tc(125,Se,2,0,"div",13),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(126,"app-viewer-image",63),u.Xb("close",function(){return u.pc(e),u.Zb().viewerImageOpen=!1}),u.Pb(),u.Pb()}if(2&e){const e=u.Zb();u.Bb(4),u.fc("readOnly",!1)("formData",e.detailOrder)("showColonAfterLabel",!0)("showValidationSummary",!1),u.Bb(1),u.fc("colCount",2),u.Bb(1),u.fc("disabled",!e.isAllowAddOrEdit)("useSubmitBehavior",!0),u.Bb(1),u.fc("colCount",2),u.Bb(1),u.fc("colCount",4),u.Bb(1),u.fc("colSpan",2)("disabled",!0),u.Bb(1),u.fc("text","M\xe3"),u.Bb(1),u.fc("colSpan",2),u.Bb(1),u.fc("colSpan",2),u.Bb(2),u.fc("text","H\u1ee3p \u0111\u1ed3ng"),u.Bb(1),u.fc("colSpan",2),u.Bb(2),u.fc("text","Phi\u1ebfu xu\u1ea5t kho"),u.Bb(1),u.fc("colSpan",4),u.Bb(2),u.fc("text","Kh\xe1ch h\xe0ng"),u.Bb(2),u.fc("colSpan",2)("editorOptions",u.ic(128,xe,e.lookupCustomer)),u.Bb(1),u.fc("text","Ng\u01b0\u1eddi nh\u1eadn"),u.Bb(1),u.fc("colSpan",2)("editorOptions",u.ic(130,ye,e.lookupOrderType)),u.Bb(1),u.fc("text","Lo\u1ea1i \u0111\u01a1n h\xe0ng"),u.Bb(2),u.fc("colSpan",2)("editorOptions",u.ic(132,ye,e.lookupSale)),u.Bb(1),u.fc("text","Ng\u01b0\u1eddi ph\u1ee5 tr\xe1ch"),u.Bb(2),u.fc("colSpan",2)("editorOptions",u.ic(134,ye,e.lookupStaff)),u.Bb(1),u.fc("text","Nh\xe2n vi\xean giao h\xe0ng"),u.Bb(1),u.fc("colSpan",2)("editorOptions",u.hc(136,Pe)),u.Bb(1),u.fc("text","Giao h\xe0ng d\u1ef1 ki\u1ebfn"),u.Bb(1),u.fc("colSpan",2)("editorOptions",u.hc(137,Ce)),u.Bb(2),u.fc("text","Gi\xe1"),u.Bb(1),u.fc("colSpan",2)("editorOptions",u.jc(138,Oe,e.lookupOrderStatus,e.isComplete)),u.Bb(1),u.fc("text","Tr\u1ea1ng th\xe1i"),u.Bb(1),u.fc("colSpan",2)("editorOptions",u.ic(141,ye,e.lookupPaymentMethod)),u.Bb(1),u.fc("text","Ph\u01b0\u01a1ng th\u1ee9c thanh to\xe1n"),u.Bb(1),u.fc("colSpan",2)("editorOptions",u.ic(143,ye,e.lookupPriority)),u.Bb(1),u.fc("text","\u01afu ti\xean"),u.Bb(2),u.fc("colSpan",2)("editorOptions",u.ic(145,ye,e.lookupVehicle)),u.Bb(1),u.fc("text","Ph\u01b0\u01a1ng ti\u1ec7n"),u.Bb(1),u.fc("colSpan",2)("disabled",!0)("visible",!e.isOrderComplete),u.Bb(1),u.fc("text","Kho\u1ea3ng c\xe1ch (km)"),u.Bb(1),u.fc("colSpan",2)("disabled",!0)("visible",!e.isOrderComplete),u.Bb(1),u.fc("text","Th\u1eddi gian \u0111i d\u1ef1 ki\u1ebfn (ph\xfat)"),u.Bb(1),u.fc("colSpan",2)("disabled",!0)("visible",e.isOrderComplete),u.Bb(1),u.fc("text","Kho\u1ea3ng c\xe1ch (km)"),u.Bb(1),u.fc("colSpan",2)("disabled",!0)("visible",e.isOrderComplete),u.Bb(1),u.fc("text","Th\u1eddi gian \u0111i th\u1ef1c t\u1ebf (ph\xfat)"),u.Bb(1),u.fc("colSpan",2),u.Bb(1),u.fc("text","Tr\u1ecdng l\u01b0\u1ee3ng"),u.Bb(1),u.fc("colSpan",2)("disabled",!0),u.Bb(1),u.fc("colSpan",4)("editorOptions",u.hc(147,ce)),u.Bb(1),u.fc("text","Ghi ch\xfa"),u.Bb(1),u.fc("ngIf",8===e.detailOrder.statusId),u.Bb(1),u.fc("ngIf",8===e.detailOrder.statusId),u.Bb(1),u.fc("colSpan",4),u.Bb(6),u.fc("readOnly",!1)("formData",e)("showColonAfterLabel",!0)("showValidationSummary",!1),u.Bb(3),u.fc("colCount",2),u.Bb(1),u.fc("colCount",2),u.Bb(1),u.fc("colSpan",1),u.Bb(1),u.fc("showColumnLines",!1)("rowAlternationEnabled",!0)("hoverStateEnabled",!0)("remoteOperations",!0)("dataSource",e.products)("columnAutoWidth",!0)("showBorders",!0)("selectedRowKeys",e.selectedProducts),u.Bb(3),u.fc("visible",!0),u.Bb(1),u.fc("pageSize",20),u.Bb(1),u.fc("showPageSizeSelector",!0)("allowedPageSizes",u.hc(148,we))("showInfo",!0),u.Bb(4),u.fc("colSpan",1),u.Bb(1),u.fc("showColumnLines",!1)("rowAlternationEnabled",!0)("hoverStateEnabled",!0)("remoteOperations",!0)("dataSource",e.tempSelectedProduct)("columnAutoWidth",!0)("showBorders",!0),u.Bb(2),u.fc("visible",!0),u.Bb(2),u.fc("allowUpdating",!0),u.Bb(1),u.fc("pageSize",20),u.Bb(1),u.fc("showPageSizeSelector",!0)("allowedPageSizes",u.hc(149,we))("showInfo",!0),u.Bb(9),u.fc("readOnly",!1)("formData",e)("showColonAfterLabel",!0)("showValidationSummary",!1),u.Bb(3),u.fc("colCount",2),u.Bb(3),u.fc("showColumnLines",!1)("rowAlternationEnabled",!0)("hoverStateEnabled",!0)("remoteOperations",!0)("dataSource",e.detailOrder.feedbacks)("columnAutoWidth",!0)("showBorders",!0),u.Bb(2),u.fc("pageSize",5),u.Bb(1),u.fc("showPageSizeSelector",!0)("allowedPageSizes",u.hc(150,ke))("showInfo",!0),u.Bb(9),u.fc("ngForOf",e.tempSelectedProductImages),u.Bb(10),u.fc("imageURL",e.viewerImageIndex)("open",e.viewerImageOpen)}}let Be=(()=>{class e{constructor(e,t,i,r,n,a,o,s,d,l,u,p,b,m,g,f,v,S,x,y,P,C,O){var w,k,A,B;this.route=e,this.orderServiceProxy=t,this.v1ServiceProxy=i,this.messageServiceProxy=r,this.lookupServiceProxy=n,this.customerServiceProxy=a,this.productOrderServiceProxy=o,this.productContractServiceProxy=s,this.contractServiceProxy=d,this.staffServiceProxy=l,this.deliveryServiceProxy=u,this.productServiceProxy=p,this.router=b,this.mapService=m,this.stringUtils=g,this.imageService=f,this.vehicleServiceProxy=v,this.vehicleService=S,this.staffService=x,this.productService=y,this.deliveryService=P,this.customerService=C,this.appAuthService=O,this.isCreateOrder=!1,this.hasContract=!1,this.keyword="description",this.receiptAddressSource=[],this.shippingAddressSource=[],this.receiptAddressCompanySource=[],this.isSelectedFromCompanyAddress=!1,this.detailOrderProduct=new h.M,this.isCreatingProduct=!0,this.productOrder=[],this.tempSelectedProduct=[],this.markerPositions=[],this.markerReceipt={lat:0,lng:0,isShipping:!1,icon:c.a.icon.ReceiptAddress},this.markerShipping={lat:0,lng:0,isShipping:!0,icon:c.a.icon.ShippingAddress},this.isComplete=!1,this.tempSelectedProductImages=[],this.viewerImageOpen=!1,this.staffIdCheck="",this.isAllowAddOrEdit=!0,this.onCustomFilter=(e,t)=>{var i=this.stringUtils.removeAccents(t).toLocaleLowerCase();return e.filter(e=>this.stringUtils.removeAccents(e.description).toLowerCase().includes(i))},this.id=this.route.snapshot.paramMap.get("id"),this.detailOrder=new h.x,this.userLogin=this.appAuthService.getStaffLogin(),this.isAllowAddOrEdit=(null===(w=this.userLogin)||void 0===w?void 0:w.roleId)!=c.a.EmployeeRole.CustomerService,this.isManager=(null===(k=this.userLogin)||void 0===k?void 0:k.roleId)==c.a.EmployeeRole.Manager,this.isManagerorOperator=(null===(A=this.userLogin)||void 0===A?void 0:A.roleId)==c.a.EmployeeRole.Manager||(null===(B=this.userLogin)||void 0===B?void 0:B.roleId)==c.a.EmployeeRole.Operator}ngOnInit(){this.receiptAddressCompanySource=c.a.ReceiveAddress,this.productOrderServiceProxy.getAll(this.id,1,1e3).subscribe(e=>{this.productOrder=e.data}),this.imageService.getImages(this.id).subscribe(e=>{this.tempSelectedProductImages=e.result}),this.lookupServiceProxy.orderStatus().subscribe(e=>{this.lookupOrderStatus=e}),this.lookupServiceProxy.paymentMethod().subscribe(e=>{this.lookupPaymentMethod=e}),this.lookupServiceProxy.reasonCancel().subscribe(e=>{this.lookupReasonCancel=e}),this.vehicleService.getLookup(!0).subscribe(e=>{this.lookupVehicle=e.result}),this.lookupServiceProxy.orderType().subscribe(e=>{this.lookupOrderType=e}),this.staffService.getLookup(c.a.EmployeeRole.Sale).subscribe(e=>{this.lookupSale=e.result}),this.lookupContract=new l.a({load:e=>{var t;if((null===(t=this.detailOrder)||void 0===t?void 0:t.contractId)&&null==e.loadOptions.searchValue){const e=new h.c;e.id=this.detailOrder.contractId,e.name=this.detailOrder.contractName;var i={data:[e],totalCount:1};return Object(d.a)(i)}return this.contractServiceProxy.getAll(e.pageNo,e.pageSize,null,null,null,null,null,e.loadOptions.searchValue,null,null,null)}}),this.staffService.getLookup(c.a.EmployeeRole.Shipper).subscribe(e=>{this.lookupStaff=e.result}),this.lookupCustomer=new l.a({load:e=>{var t;if((null===(t=this.detailOrder)||void 0===t?void 0:t.customerId)&&null==e.loadOptions.searchValue){const e=new h.q;e.init({id:this.detailOrder.customerId,name:this.detailOrder.customerName});var i={data:[e],totalCount:1};return Object(d.a)(i)}return this.customerServiceProxy.getAll(e.pageNo,e.pageSize,null,null,e.loadOptions.searchValue)}}),this.lookupServiceProxy.priority().subscribe(e=>{this.lookupPriority=e}),this.deliveryServiceProxy.getAll(1,2e4,null,null,null).subscribe(e=>{this.lookupDelivery=e.data})}ClickviewerImageOpen(e){this.viewerImageOpen=!0,this.viewerImageIndex=e}ngAfterViewInit(){this.v1ServiceProxy.orderGet(this.id).subscribe(e=>{var t,i,r,n,a,o,s,d,h,u,p,b,m,g,f,v,S;this.detailOrder=e,this.isOrderComplete=e.statusId==c.a.StatusOrder.Finished,this.detailOrder.followers=1==(null===(t=e.followers)||void 0===t?void 0:t.length)?null!==(r=null===(i=e.followers[0])||void 0===i?void 0:i.split(","))&&void 0!==r?r:[]:null==e?void 0:e.followers,this.staffIdCheck=e.staffId,this.productOrderServiceProxy.getAll(this.id,1,1e3).subscribe(e=>{this.tempSelectedProduct=e.data}),this.imageService.getImages(this.id).subscribe(e=>{this.tempSelectedProductImages=e.result}),this.products=new l.a(e.contractId?{load:t=>this.productContractServiceProxy.getAll(e.contractId,t.pageNo,t.pageSize)}:{load:e=>this.productServiceProxy.getAll(e.pageNo,e.pageSize,e.loadOptions.searchValue,null,null)}),this.markerReceipt={lat:Number(null!==(o=null===(a=null===(n=e.locationDetail)||void 0===n?void 0:n.source)||void 0===a?void 0:a.latitude)&&void 0!==o?o:0),lng:Number(null!==(h=null===(d=null===(s=e.locationDetail)||void 0===s?void 0:s.source)||void 0===d?void 0:d.longtitude)&&void 0!==h?h:0),isShipping:!1,icon:c.a.icon.ReceiptAddress},this.markerShipping={lat:Number(null!==(b=null===(p=null===(u=e.locationDetail)||void 0===u?void 0:u.destination)||void 0===p?void 0:p.latitude)&&void 0!==b?b:0),lng:Number(null!==(f=null===(g=null===(m=e.locationDetail)||void 0===m?void 0:m.destination)||void 0===g?void 0:g.longtitude)&&void 0!==f?f:0),isShipping:!0,icon:c.a.icon.ShippingAddress},this.isOrderComplete&&(this.markerReceipt={lat:Number(null!==(v=e.latitudeFinished)&&void 0!==v?v:0),lng:Number(null!==(S=e.longtitudeFinished)&&void 0!==S?S:0),isShipping:!1,icon:c.a.icon.ReceiptAddress}),this.markerPositions.push(this.markerReceipt),this.markerPositions.push(this.markerShipping),this.mapService.setOrginalDistination(this.markerReceipt,this.markerShipping),this.mapService.buildMap(),this.markerPositions.length>0&&this.mapService.addMarker(this.markerPositions),this.lookupCustomer.reload(),this.lookupContract.reload()})}onFormSubmit(e){return Object(a.a)(this,void 0,void 0,function*(){if(e.preventDefault(),this.detailOrder){const e=new h.eb;if(e.init(this.detailOrder),(null==this.detailOrder.vehicleId||null==this.detailOrder.vehicleId)&&this.detailOrder.staffId)return void this.messageServiceProxy.error("C\u1ea7n ch\u1ecdn ph\u01b0\u01a1ng ti\u1ec7n v\u1eadn chuy\u1ec3n cho nh\xe2n vi\xean giao h\xe0ng.");if(null==e.receiptAddress||null==e.shippingAddress||e.receiptAddress.trim().length<1||e.shippingAddress.trim().length<1)return void this.messageServiceProxy.error("\u0110\u1ecba ch\u1ec9 ho\u1eb7c kho\u1ea3ng c\xe1ch, th\u1eddi gian d\u1ef1 ki\u1ebfn ch\u01b0a \u0111\u01b0\u1ee3c t\xednh.");e.latitudeReceiptAddress=this.markerReceipt.lat,e.longtitudeReceiptAddress=this.markerReceipt.lng,e.latitudeShippingAddress=this.markerShipping.lat,e.longtitudeShippingAddress=this.markerShipping.lng,e.estimateMinuteMoving=this.detailOrder.estimateMinuteMoving,e.distance=this.detailOrder.distance,this.staffIdCheck!=e.staffId&&(e.waitingConfirmUpdatedTime=o()),e.finishedUpdatedTime=e.statusId==c.a.StatusOrder.Finished&&null==e.finishedUpdatedTime?o():void 0,this.v1ServiceProxy.orderPut(this.detailOrder.id,e).subscribe(e=>{this.messageServiceProxy.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!"),this.router.navigate(["app/orders/list"])})}})}createOrder(e){return new Promise(t=>{this.orderServiceProxy.create(e).toPromise().then(e=>{this.messageServiceProxy.success("T\u1ea1o \u0111\u01a1n h\xe0ng th\xe0nh c\xf4ng"),this.isCreateOrder=!1,t(e)})})}onChangeContract(e){return Object(a.a)(this,void 0,void 0,function*(){const t=e.value;t&&this.contractServiceProxy.get(t).subscribe(e=>{this.detailOrder.customerId=e.customerId,this.detailOrder.customerName=e.customerName,this.lookupCustomer.reload()})})}onChangeStaff(e){e.value&&this.detailOrder.statusId<4&&(this.detailOrder.statusId=3)}getCustomerByContract(e){return new Promise(t=>{this.contractServiceProxy.get(e).toPromise().then(e=>{t(e.customerId)})})}loadProductsByContract(e){return new Promise(t=>{this.productContractServiceProxy.getAll(e,1,15).toPromise().then(e=>{t(e.data)})})}addOrderQuantityIntoProductContract(e){return Object(a.a)(this,void 0,void 0,function*(){const t=yield this.loadProductsByContract(e),i=[];return t.forEach(e=>{const t=Object.assign(Object.assign({},e),{orderQuantity:0});i.push(t)}),new Promise(e=>{e(i)})})}getProductsByContract(e){return Object(a.a)(this,void 0,void 0,function*(){const t=yield this.addOrderQuantityIntoProductContract(e);return new Promise(e=>e(t))})}onSelectionChanged(e){var t,i,r,n;if(e.currentSelectedRowKeys.length>0){const a=Object.assign(Object.assign({},e.currentSelectedRowKeys[0]),{unitQuantity:null!==(i=null===(t=e.currentSelectedRowKeys[0])||void 0===t?void 0:t.quantity)&&void 0!==i?i:0,unitPrice:this.detailOrder.contractId?null===(r=e.currentSelectedRowKeys[0])||void 0===r?void 0:r.unitPrice:null===(n=e.currentSelectedRowKeys[0])||void 0===n?void 0:n.price});this.tempSelectedProduct.push(a)}if(e.currentDeselectedRowKeys.length>0){const t=this.tempSelectedProduct.indexOf(e.currentDeselectedRowKeys[0]);this.tempSelectedProduct.splice(t,1)}this.detailOrder.price=e.selectedRowsData&&e.selectedRowsData.length>0?this.tempSelectedProduct.reduce((e,t)=>e+t.unitQuantity*t.unitPrice,0):0,this.detailOrder.weight=e.selectedRowsData&&e.selectedRowsData.length>0?this.tempSelectedProduct.reduce((e,t)=>e+t.weight,0):0}createProduct(e){return new Promise(t=>{this.productOrderServiceProxy.create(e).toPromise().then(e=>{this.messageServiceProxy.success("Th\xeam s\u1ea3n ph\u1ea9m th\xe0nh c\xf4ng."),t(!0)})})}onDeleteProduct(e){this.productOrderServiceProxy.delete(e).subscribe(e=>{this.messageServiceProxy.success("X\xf3a th\xe0nh c\xf4ng."),this.productOrderDataGrid.instance.refresh()})}onDelete(e){this.messageServiceProxy.confirmDelete(e=>{e&&this.orderServiceProxy.delete(this.detailOrder.id).subscribe(e=>{this.messageServiceProxy.success("X\xf3a \u0111\u01a1n h\xe0ng th\xe0nh c\xf4ng"),window.location.href="app/orders/list"})})}createRouting(){0==this.markerReceipt.lng&&0==this.markerReceipt.lat||0==this.markerShipping.lng&&0==this.markerShipping.lat||(this.mapService.calculateDistance(this.markerReceipt,this.markerShipping).subscribe(e=>{let t=e.rows[0].elements.filter(e=>"OK"==e.status);t&&(this.detailOrder.estimateMinuteMoving=Math.round(parseFloat((t[0].duration.value/60).toFixed(2))),this.detailOrder.distance=Math.round(t[0].distance.value/1e3*10)/10)}),this.mapService.directionMap(this.markerReceipt,this.markerShipping))}onRowUpdated(e){}onSelectCompanyReceiptAddressEvent(e){let t=c.a.ReceiveAddress.filter(t=>t.address==e.value);if(t.length>0){this.isSelectedFromCompanyAddress=!0,this.detailOrder.receiptAddress=e.value,this.receiptAddressAutocomplete.query=e.value;var i=t[0].location;this.markerReceipt.lng=i.lng,this.markerReceipt.lat=i.lat,this.markerReceipt.isShipping=!1,this.markerPositions.map(e=>(0==e.isShipping&&(e.lng=i.lng,e.lat=i.lat),e)),0==this.markerPositions.filter(e=>0==e.isShipping).length&&this.markerPositions.push(this.markerReceipt),this.mapService.removeMarker(),this.mapService.addMarker(this.markerPositions),this.createRouting()}}onSelectReceiptAddressEvent(e){e!=this.detailOrder.receiptAddress&&(this.detailOrder.receiptAddress=e.description),null!=e.place_id&&this.mapService.getPlaceDetail(e.place_id).subscribe(e=>{var t=e.result.geometry.location;this.markerReceipt.lng=t.lng,this.markerReceipt.lat=t.lat,this.markerReceipt.isShipping=!1,this.markerPositions.map(e=>(0==e.isShipping&&(e.lng=t.lng,e.lat=t.lat),e)),0==this.markerPositions.filter(e=>0==e.isShipping).length&&this.markerPositions.push(this.markerReceipt),this.mapService.removeMarker(),this.mapService.addMarker(this.markerPositions),this.createRouting()})}onClearReceiptAddressEvent(e){this.receiptAddressAutocomplete.query="",this.detailOrder.receiptAddress=""}onClearShippingAddressEvent(e){this.selectShippingAutocomplete.query="",this.detailOrder.shippingAddress=""}onChangeSearchReceiptAddress(e){this.isSelectedFromCompanyAddress=!1,this.mapService.searchPlaces(e).subscribe(e=>{this.receiptAddressSource=e.predictions})}onChangeCustomer(e){if(e.value){let t=this.lookupCustomer.items().find(t=>t.id==e.value).name;this.customerService.getAddress({name:t}).subscribe(e=>{e.success&&(this.deliveryAddressCompanySource=e.result.filter(e=>null!=e&&""!=e).map(e=>({address:e})),this.shippingAddressSource=e.result.filter(e=>null!=e&&""!=e).map(e=>({description:e})),1==this.shippingAddressSource.length&&(this.detailOrder.shippingAddress||(this.searchAddressAndAddMarker(this.shippingAddressSource[0].description),this.onSetQueryAutoComplete(this.shippingAddressSource[0].description))))})}}onSetQueryAutoComplete(e){this.selectShippingAutocomplete.query=e}searchAddressAndAddMarker(e){e&&(this.detailOrder.shippingAddress=e,this.mapService.searchPlaces(e).subscribe(e=>{this.shippingAddressSource=e.predictions,this.mapService.getPlaceDetail(this.shippingAddressSource[0].place_id).subscribe(e=>{var t=e.result.geometry.location;this.markerShipping.lng=t.lng,this.markerShipping.lat=t.lat,this.markerShipping.isShipping=!0,0==this.markerPositions.filter(e=>e.isShipping).length&&this.markerPositions.push(this.markerShipping),this.mapService.removeMarker(),this.mapService.addMarker(this.markerPositions),this.createRouting()})}))}onSelectShippingAddressEvent(e){e!=this.detailOrder.shippingAddress&&(this.detailOrder.shippingAddress=e.description),null!=e.place_id?this.mapService.getPlaceDetail(e.place_id).subscribe(e=>{var t=e.result.geometry.location;this.markerShipping.lng=t.lng,this.markerShipping.lat=t.lat,this.markerShipping.isShipping=!0,this.markerPositions.map(e=>(e.isShipping&&(e.lng=t.lng,e.lat=t.lat),e)),0==this.markerPositions.filter(e=>e.isShipping).length&&this.markerPositions.push(this.markerShipping),this.mapService.removeMarker(),this.mapService.addMarker(this.markerPositions),this.createRouting()}):this.searchAddressAndAddMarker(e.description)}onChangeSearchShippingAddress(e){this.mapService.searchPlaces(e).subscribe(e=>{this.shippingAddressSource=e.predictions})}}return e.\u0275fac=function(t){return new(t||e)(u.Mb(g.a),u.Mb(h.J),u.Mb(h.hb),u.Mb(b.a),u.Mb(h.E),u.Mb(h.r),u.Mb(h.N),u.Mb(h.K),u.Mb(h.d),u.Mb(h.V),u.Mb(h.s),u.Mb(h.O),u.Mb(g.b),u.Mb(S.a),u.Mb(x.a),u.Mb(W),u.Mb(h.jb),u.Mb(p.a),u.Mb(m.a),u.Mb(v),u.Mb(Y.a),u.Mb(P.a),u.Mb(y.a))},e.\u0275cmp=u.Gb({type:e,selectors:[["app-order-detail"]],viewQuery:function(e,t){if(1&e&&(u.zc(te,1),u.zc(ie,1),u.zc(re,1),u.zc(ne,1),u.zc(ae,1)),2&e){let e;u.lc(e=u.Yb())&&(t.productOrderDataGrid=e.first),u.lc(e=u.Yb())&&(t.feedbackDataGrid=e.first),u.lc(e=u.Yb())&&(t.orderStatusLookup=e.first),u.lc(e=u.Yb())&&(t.selectShippingAutocomplete=e.first),u.lc(e=u.Yb())&&(t.receiptAddressAutocomplete=e.first)}},decls:1,vars:1,consts:[["class","card custom-card ","style","margin-bottom: 5px;",4,"ngIf"],[1,"card","custom-card",2,"margin-bottom","5px"],[1,"card-header"],[1,"card-body"],["action","",3,"submit"],["validationGroup","formData",3,"readOnly","formData","showColonAfterLabel","showValidationSummary"],["itemType","group","caption","",3,"colCount"],["text","L\u01b0u","type","success","icon","fa fa-floppy-o","validationGroup","formData",2,"margin-right","10px","background-color","#12007c","font-weight","bold","padding","2px",3,"disabled","useSubmitBehavior"],["itemType","group","caption","Th\xf4ng tin ch\xednh",3,"colCount"],["dataField","code",3,"colSpan","disabled"],[3,"text"],["itemType","empty",3,"colSpan"],[3,"colSpan"],[4,"dxTemplate"],["dataField","codeDeliveryBill",3,"colSpan"],["type","required","message","Tr\u01b0\u1eddng n\xe0y l\xe0 b\u1eaft bu\u1ed9c"],["dataField","customerId",3,"colSpan"],["dataField","receiverId","editorType","dxSelectBox",3,"colSpan","editorOptions"],["dataField","orderTypeId","editorType","dxSelectBox",3,"colSpan","editorOptions"],["dataField","followers","editorType","dxTagBox",3,"colSpan","editorOptions"],["editorType","dxSelectBox","dataField","staffId",3,"colSpan","editorOptions"],["dataField","estimateTime","editorType","dxDateBox",3,"colSpan","editorOptions"],["dataField","price","editorType","dxNumberBox",3,"colSpan","editorOptions"],["dataField","statusId","editorType","dxSelectBox",3,"colSpan","editorOptions"],["dataField","paymentMethodId","editorType","dxSelectBox",3,"colSpan","editorOptions"],["dataField","priorityId","editorType","dxSelectBox",3,"colSpan","editorOptions"],["dataField","vehicleId","editorType","dxSelectBox",3,"colSpan","editorOptions"],["dataField","distance","editorType","dxNumberBox",3,"colSpan","disabled","visible"],["dataField","estimateMinuteMoving","editorType","dxNumberBox",3,"colSpan","disabled","visible"],["dataField","shipperDistance","editorType","dxNumberBox",3,"colSpan","disabled","visible"],["dataField","shipperTime","editorType","dxNumberBox",3,"colSpan","disabled","visible"],["dataField","weight","editorType","dxNumberBox",3,"colSpan"],[3,"colSpan","disabled"],["dataField","note","editorType","dxTextArea",3,"colSpan","editorOptions"],[3,"colSpan",4,"ngIf"],["dataField","cancelNote","editorType","dxTextArea",3,"colSpan","editorOptions",4,"ngIf"],["itemType","tabbed",3,"colSpan"],["title","S\u1ea3n ph\u1ea9m"],["action",""],["id","form",3,"readOnly","formData","showColonAfterLabel","showValidationSummary"],["itemType","group","caption",""],["itemType","group",3,"colCount"],[3,"showColumnLines","rowAlternationEnabled","hoverStateEnabled","remoteOperations","dataSource","columnAutoWidth","showBorders","selectedRowKeys","selectedRowKeysChange","onSelectionChanged"],["productOrderDataGrid",""],["mode","multiple"],[3,"visible"],[3,"pageSize"],[3,"showPageSizeSelector","allowedPageSizes","showInfo"],["dataField","name","caption","S\u1ea3n ph\u1ea9m"],["dataField","quantity","caption","S\u1ed1 l\u01b0\u01a1ng"],["dataField","unitPrice","caption","Gi\xe1 ti\u1ec1n","format","#,##0"],[3,"showColumnLines","rowAlternationEnabled","hoverStateEnabled","remoteOperations","dataSource","columnAutoWidth","showBorders","onRowUpdated"],["mode","cell",3,"allowUpdating"],["title","Feedback"],["itemType","group"],[3,"showColumnLines","rowAlternationEnabled","hoverStateEnabled","remoteOperations","dataSource","columnAutoWidth","showBorders"],["feedbackDataGrid",""],["dataField","content","caption","N\u1ed9i dung"],["dataField","feedbackCategory","caption","M\u1ee9c \u01b0u ti\xean"],["dataField","rating","caption","\u0110\xe1nh gi\xe1"],["title","Images"],[1,"flex-container"],["class","image",4,"ngFor","ngForOf"],[3,"imageURL","open","close"],["displayExpr","name","valueExpr","id",3,"dataSource","value","searchEnabled","valueChange","onValueChanged"],["displayExpr","name","valueExpr","id","searchExpr","name",3,"dataSource","value","searchEnabled","onValueChanged","valueChange"],["displayExpr","name","valueExpr","id",3,"dataSource","value","searchEnabled","valueChange"],["dataField","cancelNote","editorType","dxTextArea",3,"colSpan","editorOptions"],[1,"image"],["alt","Images","height","200",1,"img-thumbnail",3,"src","click"],[1,"ng-autocomplete"],["displayExpr","address","valueExpr","address","placeholder","Ch\u1ecdn nhanh \u0111\u1ecba ch\u1ec9 l\u1ea5y h\xe0ng",3,"dataSource","readOnly","searchEnabled","onValueChanged"],["required","","placeholder","\u0110\u1ecba ch\u1ec9 l\u1ea5y h\xe0ng",3,"disabled","searchKeyword","data","initialValue","customFilter","debounceTime","itemTemplate","notFoundTemplate","selected","inputChanged","inputCleared"],["receiptAddressAutocomplete",""],["itemTemplate",""],["notFoundTemplate",""],[3,"innerHTML"],["required","","placeholder","\u0110\u1ecba ch\u1ec9 giao h\xe0ng",3,"disabled","data","searchKeyword","initialValue","customFilter","debounceTime","itemTemplate","notFoundTemplate","selected","inputChanged","inputCleared"],["selectShippingAutocomplete",""],["id","map",1,"map-container"]],template:function(e,t){1&e&&u.tc(0,Ae,127,151,"div",0),2&e&&u.fc("ngIf",t.detailOrder)},directives:[n.j,r.i,r.e,r.f,C.a,B.k,O.a,B.lb,T.d,B.A,B.v,A.a,B.Hb,B.W,B.yb,B.wb,B.f,B.P,n.i,ee,w.a,E.a],styles:["agm-map[_ngcontent-%COMP%]{height:300px;width:400px}img[_ngcontent-%COMP%]{display:block;max-height:100%;max-width:100%}.flex-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:row}.flex-container[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{max-width:200px;cursor:pointer;padding:.5em}@media (max-width:800px){.flex-container[_ngcontent-%COMP%]{flex-direction:column}}.map-container[_ngcontent-%COMP%]{width:100%;height:100%;min-height:500px}#geocoder-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{min-width:50%;margin-left:25%}.ng-autocomplete[_ngcontent-%COMP%]{width:100%}"]}),e})();var Te=i("Iab2"),Ee=i("TScJ"),Qe=i("gMzk");const Ie=["orderDataGrid"];function _e(e,t){if(1&e){const e=u.Rb();u.Qb(0,"div",42),u.Xb("click",function(){u.pc(e);const i=t.$implicit;return u.Zb().onClickFilter(i)}),u.Qb(1,"div",43),u.Nb(2,"i",44),u.Pb(),u.Qb(3,"div",45),u.Qb(4,"h3",46),u.vc(5),u.Pb(),u.Qb(6,"p",47),u.vc(7),u.Pb(),u.Pb(),u.Pb()}if(2&e){const e=t.$implicit;u.Bb(5),u.wc(e.quantity),u.Bb(2),u.wc(e.name)}}function Me(e,t){1&e&&u.Nb(0,"dx-check-box",49),2&e&&u.fc("value",!1)("disabled",!0)}function Fe(e,t){1&e&&u.Nb(0,"dx-check-box",49),2&e&&u.fc("value",!0)("disabled",!0)}function Ne(e,t){if(1&e&&(u.Qb(0,"div"),u.tc(1,Me,1,2,"dx-check-box",48),u.tc(2,Fe,1,2,"dx-check-box",48),u.Pb()),2&e){const e=t.$implicit;u.Bb(1),u.fc("ngIf",null===e.value),u.Bb(1),u.fc("ngIf",null!==e.value)}}function De(e,t){if(1&e){const e=u.Rb();u.Qb(0,"dx-button",52),u.Xb("onClick",function(){u.pc(e);const t=u.Zb().$implicit;return u.Zb().onDelete(t.data.id)}),u.Pb()}}const Re=function(e){return["../detail",e]};function Le(e,t){if(1&e&&(u.Qb(0,"div"),u.Nb(1,"dx-button",50),u.tc(2,De,1,0,"dx-button",51),u.Pb()),2&e){const e=t.$implicit,i=u.Zb();u.Bb(1),u.fc("routerLink",u.ic(2,Re,e.value)),u.Bb(1),u.fc("ngIf",e.data.statusId==i.StatusOrder.Waiting&&i.isManager)}}function Ve(e,t){1&e&&(u.Qb(0,"span",59),u.vc(1,"Ch\u1edf x\u1eed l\xfd"),u.Pb())}function Ke(e,t){1&e&&(u.Qb(0,"span",59),u.vc(1,"\u0110ang \u0111\xf3ng g\xf3i"),u.Pb())}function ze(e,t){1&e&&(u.Qb(0,"span",60),u.vc(1,"Ch\u1edd x\xe1c nh\u1eadn"),u.Pb())}function je(e,t){1&e&&(u.Qb(0,"span",61),u.vc(1,"\u0110\xe3 x\xe1c nh\u1eadn"),u.Pb())}function He(e,t){1&e&&(u.Qb(0,"span",61),u.vc(1,"\u0110ang \u0111i l\u1ea5y h\xe0ng"),u.Pb())}function Xe(e,t){1&e&&(u.Qb(0,"span",62),u.vc(1,"\u0110ang v\u1eadn chuy\u1ec3n"),u.Pb())}function Ge(e,t){1&e&&(u.Qb(0,"span",63),u.vc(1,"\u0110\xe3 ho\xe0n th\xe0nh"),u.Pb())}function $e(e,t){1&e&&(u.Qb(0,"span",64),u.vc(1,"\u0110\xe3 h\u1ee7y"),u.Pb())}function Ue(e,t){if(1&e&&(u.Qb(0,"div"),u.tc(1,Ve,2,0,"span",53),u.tc(2,Ke,2,0,"span",53),u.tc(3,ze,2,0,"span",54),u.tc(4,je,2,0,"span",55),u.tc(5,He,2,0,"span",55),u.tc(6,Xe,2,0,"span",56),u.tc(7,Ge,2,0,"span",57),u.tc(8,$e,2,0,"span",58),u.Pb()),2&e){const e=t.$implicit,i=u.Zb();u.Bb(1),u.fc("ngIf",e.value===i.StatusOrder.Waiting),u.Bb(1),u.fc("ngIf",e.value===i.StatusOrder.Processing),u.Bb(1),u.fc("ngIf",e.value===i.StatusOrder.WaitingConfirmId),u.Bb(1),u.fc("ngIf",e.value===i.StatusOrder.Confirmed),u.Bb(1),u.fc("ngIf",e.value===i.StatusOrder.GoPickUp),u.Bb(1),u.fc("ngIf",e.value===i.StatusOrder.Shipping),u.Bb(1),u.fc("ngIf",e.value===i.StatusOrder.Finished),u.Bb(1),u.fc("ngIf",e.value===i.StatusOrder.Cancelled)}}const Ze=function(e){return{dataSource:e,displayExpr:"name",valueExpr:"id",searchEnabled:!0}},qe=function(e,t,i){return{onValueChanged:e,value:t,dataSource:i,displayExpr:"name",valueExpr:"id",searchEnabled:!0}},We=function(e,t,i){return{items:e,displayExpr:"name",valueExpr:"id",searchEnabled:!0,onValueChanged:t,value:i}},Ye=function(e,t,i){return{onValueChanged:e,value:t,items:i,displayExpr:"name",valueExpr:"value"}},Je=function(){return{text:"L\u1ecdc",type:"success",icon:"fa fa-filter",validationGroup:"newsFormFilter",useSubmitBehavior:!0}},et=function(){return["../create"]},tt=function(){return[10,20,50,100,500]};let it=(()=>{class e{constructor(e,t,i,r,n,a){this.orderServiceProxy=e,this.messageService=t,this.lookupService=i,this.staffService=r,this.orderService=n,this.appAuthService=a,this.gridHeight=window.innerHeight-530+"px",this.fromDateFilter=o(),this.toDateFilter=o(),this.statusesFilter=[],this.hasContractFilter=null,this.overDueFilter=null,this.checkOverDueDataSource=c.a.checkOverDueDataSorce,this.StatusOrder=c.a.StatusOrder,this.lookupOrderHasContract=[new h.D({id:1,name:"T\u1ea5t c\u1ea3"}),new h.D({id:2,name:"C\xf3 h\u1ee3p \u0111\u1ed3ng"}),new h.D({id:3,name:"Kh\xf4ng h\u1ee3p \u0111\u1ed3ng"})],this.valueSelectOrderHasContract=1,this.popupCreateOrder=!1,this.isAllowAddOrEdit=!0,this.statusesFilterChanged=this.statusesFilterChanged.bind(this),this.onSwitchOverDueValueChanged=this.onSwitchOverDueValueChanged.bind(this)}ngOnInit(){var e,t;this.userLogin=this.appAuthService.getStaffLogin(),this.isManager=(null===(e=this.userLogin)||void 0===e?void 0:e.roleId)==c.a.EmployeeRole.Manager,this.isAllowAddOrEdit=(null===(t=this.userLogin)||void 0===t?void 0:t.roleId)!=c.a.EmployeeRole.CustomerService,this.orderDatasource=new l.a({load:e=>this.orderService.getAllOrder(e.mapFrom(),this.getAdditionCondition())}),this.orderCreateModel=new h.k,this.lookupService.orderStatus().subscribe(e=>{this.lookupOrderStatus=e}),this.staffService.getLookup(c.a.EmployeeRole.Shipper).subscribe(e=>{this.lookupStaff=e.result}),this.lookupService.orderType().subscribe(e=>{this.lookupOrderType=e}),this.refreshOrderStatus()}getAdditionCondition(){return 1===this.valueSelectOrderHasContract&&(this.hasContractFilter=null),2===this.valueSelectOrderHasContract&&(this.hasContractFilter=!0),3===this.valueSelectOrderHasContract&&(this.hasContractFilter=!1),{from:this.fromDateFilter,to:this.toDateFilter,staffId:this.staffIdFilter,statuses:this.statusesFilter,orderTypeIds:this.orderTypeFilter,hasContract:this.hasContractFilter,overDue:this.overDueFilter}}getAdditionConditionForRecord(){return{from:this.fromDateFilter,to:this.toDateFilter,staffId:this.staffIdFilter,statuses:null,orderTypeIds:null,hasContract:null,overDue:null}}onFormFilterSubmit(e){e.preventDefault(),this.refreshOrderStatus(),this.orderDataGrid.instance.refresh()}refreshOrderStatus(){this.orderService.getOrderReport({},this.getAdditionConditionForRecord()).subscribe(e=>{this.orderReport=e.result})}onCreate(){this.popupCreateOrder=!0}onDelete(e){this.messageService.confirmDelete(t=>{t&&this.orderService.onDeleteOrder(e).subscribe(e=>{e?(this.messageService.success("X\xf3a th\xe0nh c\xf4ng."),this.refreshOrderStatus(),this.orderDataGrid.instance.refresh()):this.messageService.error("X\xf3a kh\xf4ng th\xe0nh c\xf4ng.")},e=>{this.messageService.error(e?e.error.message:"Kh\xf4ng th\u1ec3 xo\xe1 \u0111\u01a1n h\xe0ng.")})})}onFileDownload(e){var t=new Blob([e.data],{type:e.data.type});Object(Te.saveAs)(t,"Tham_khao_mau_excel.xlsx")}onChangeValue(e){}onSelectFile(e){const t=e.target.files[0];this.orderServiceProxy.import(t?{data:t,fileName:t.name}:null).subscribe(e=>this.messageService.success("Upload th\xe0nh c\xf4ng"))}onDownload(){this.orderServiceProxy.templateImport().subscribe(e=>this.onFileDownload(e))}onClickFilter(e){0!=e.statusId?(this.overDueFilter=null,this.statusesFilter=[e.statusId],this.orderDataGrid.instance.refresh()):(this.statusesFilter=[],this.overDueFilter=!0,this.orderDataGrid.instance.refresh())}statusesFilterChanged(e){this.statusesFilter=e.value,this.refreshOrderStatus(),this.orderDataGrid.instance.refresh()}onSwitchOverDueValueChanged(e){this.overDueFilter=e.value,this.refreshOrderStatus(),this.orderDataGrid.instance.refresh()}}return e.\u0275fac=function(t){return new(t||e)(u.Mb(h.J),u.Mb(b.a),u.Mb(h.E),u.Mb(m.a),u.Mb(Ee.a),u.Mb(y.a))},e.\u0275cmp=u.Gb({type:e,selectors:[["app-order-list"]],viewQuery:function(e,t){if(1&e&&u.zc(Ie,1),2&e){let e;u.lc(e=u.Yb())&&(t.orderDataGrid=e.first)}},decls:62,vars:82,consts:[[1,"card","custom-card",2,"margin-bottom","5px"],[1,"card-header"],[1,"card-body"],[1,"main-overview"],["class","overviewCard",3,"click",4,"ngFor","ngForOf"],["action","",3,"submit"],["id","form",3,"readOnly","formData","showColonAfterLabel","showValidationSummary"],["itemType","group","caption","",3,"colCount"],["dataField","staffIdFilter","editorType","dxTagBox",3,"colSpan","editorOptions"],[3,"text"],["dataField","statusesFilter","editorType","dxTagBox",3,"colSpan","editorOptions"],["dataField","orderTypeFilter","editorType","dxTagBox",3,"colSpan","editorOptions"],[3,"colSpan"],["displayFormat","dd/MM/yyyy",3,"value","valueChange"],["dataField","valueSelectOrderHasContract","editorType","dxSelectBox",3,"colSpan","editorOptions"],["editorType","dxSelectBox",3,"colSpan","editorOptions"],["itemType","button","horizontalAlignment","right",3,"buttonOptions"],["action",""],["itemType","group","caption",""],["text","T\u1ea1o m\u1edbi","icon","fa fa-plus-square","type","success",2,"margin-right","10px","background-color","#ed8200","font-weight","bold","padding","2px",3,"disabled","routerLink"],["icon","fa fa-cloud-download","type","normal","text","Tham kh\u1ea3o m\u1eabu excel",1,"btn-outline-dashed","btn-outline-default","m-1",3,"disabled","onClick"],["icon","fa fa-cloud-upload","type","normal","text","Nh\u1eadp li\u1ec7u nhanh t\u1eeb file excel",1,"btn-outline-dashed","btn-outline-dark","m-1",3,"disabled","click"],["type","file","onclick","this.value = null","accept","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",2,"display","none",3,"change"],["inputUploadExcel",""],["itemType","group"],[3,"height","showColumnLines","rowAlternationEnabled","hoverStateEnabled","remoteOperations","selectedRowKeys","dataSource","columnAutoWidth","showBorders","heightChange","selectedRowKeysChange"],["orderDataGrid",""],["mode","multiple"],[3,"visible"],["mode","single"],[3,"pageSize"],[3,"showPageSizeSelector","allowedPageSizes","showInfo"],["dataField","code","caption","M\xe3 \u0111\u01a1n h\xe0ng","sortOrder","desc",3,"filterValue","filterValueChange"],["dataField","codeDeliveryBill","caption","Phi\u1ebfu xu\u1ea5t kho",3,"filterValue","filterValueChange"],["dataField","staffName","caption","Nh\xe2n vi\xean giao h\xe0ng"],["dataField","orderTime","caption","Th\u1eddi gian \u0111\u1eb7t h\xe0ng","format","dd/MM/yyyy HH:mm","dataType","datetime"],["dataField","integratedTime","caption","Ng\xe0y \u0111\u1ed3ng b\u1ed9","format","dd/MM/yyyy HH:mm","dataType","datetime"],["dataField","contractId","caption","C\xf3 h\u1ee3p \u0111\u1ed3ng","dataType","boolean","cellTemplate","checkboxCellTemplate",3,"allowFiltering"],[4,"dxTemplate","dxTemplateOf"],["dataField","overDue","caption","Qu\xe1 h\u1ea1n","dataType","boolean",3,"allowFiltering"],["dataField","statusId","caption","Tr\u1ea1ng th\xe1i","cellTemplate","statusCellTemplate","alignment","center",3,"allowFiltering"],["dataField","id","caption","T\xf9y ch\u1ec9nh","alignment","left","cellTemplate","cellTemplate",3,"width","allowFiltering","allowSorting"],[1,"overviewCard",3,"click"],[1,"overviewCard-icon","overviewCard-icon--document"],[1,"fa","fa-hourglass-start"],[1,"overviewCard-description"],[1,"overviewCard-title","text-light"],[1,"overviewCard-subtitle"],[3,"value","disabled",4,"ngIf"],[3,"value","disabled"],["icon","fa fa-pencil-square-o","text","Chi ti\u1ebft","type","success",2,"margin-right","5px",3,"routerLink"],["icon","fa fa-trash","text","X\xf3a","style","background-color: #ff000f;","type","success",3,"onClick",4,"ngIf"],["icon","fa fa-trash","text","X\xf3a","type","success",2,"background-color","#ff000f",3,"onClick"],["style","background-color: #ed8200; border-color: transparent; color: #fff; padding: 2px 10px; border-radius: 20px;",4,"ngIf"],["style","background-color: #00a2b7; border-color: transparent; color: #fff; padding: 2px 10px; border-radius: 20px;",4,"ngIf"],["style","background-color: #06ce81; border-color: transparent; color: #fff; padding: 2px 10px; border-radius: 20px;",4,"ngIf"],["style","background-color: #1e65ff; border-color: transparent; color: #fff; padding: 2px 10px; border-radius: 20px;",4,"ngIf"],["style","background-color: #00ff9d; border-color: transparent; color: #fff; padding: 2px 10px; border-radius: 20px;",4,"ngIf"],["style","background-color: #ff000f; border-color: transparent; color: #fff; padding: 2px 10px; border-radius: 20px;",4,"ngIf"],[2,"background-color","#ed8200","border-color","transparent","color","#fff","padding","2px 10px","border-radius","20px"],[2,"background-color","#00a2b7","border-color","transparent","color","#fff","padding","2px 10px","border-radius","20px"],[2,"background-color","#06ce81","border-color","transparent","color","#fff","padding","2px 10px","border-radius","20px"],[2,"background-color","#1e65ff","border-color","transparent","color","#fff","padding","2px 10px","border-radius","20px"],[2,"background-color","#00ff9d","border-color","transparent","color","#fff","padding","2px 10px","border-radius","20px"],[2,"background-color","#ff000f","border-color","transparent","color","#fff","padding","2px 10px","border-radius","20px"]],template:function(e,t){if(1&e){const e=u.Rb();u.Qb(0,"div",0),u.Nb(1,"div",1),u.Qb(2,"div",2),u.Qb(3,"div",3),u.tc(4,_e,8,2,"div",4),u.Pb(),u.Pb(),u.Pb(),u.Qb(5,"div",0),u.Qb(6,"div",1),u.Qb(7,"form",5),u.Xb("submit",function(e){return t.onFormFilterSubmit(e)}),u.Qb(8,"dx-form",6),u.Qb(9,"dxi-item",7),u.Qb(10,"dxi-item",8),u.Nb(11,"dxo-label",9),u.Pb(),u.Qb(12,"dxi-item",10),u.Nb(13,"dxo-label",9),u.Pb(),u.Qb(14,"dxi-item",11),u.Nb(15,"dxo-label",9),u.Pb(),u.Qb(16,"dxi-item",12),u.Qb(17,"dx-date-box",13),u.Xb("valueChange",function(e){return t.fromDateFilter=e}),u.Pb(),u.Nb(18,"dxo-label",9),u.Pb(),u.Qb(19,"dxi-item",12),u.Qb(20,"dx-date-box",13),u.Xb("valueChange",function(e){return t.toDateFilter=e}),u.Pb(),u.Nb(21,"dxo-label",9),u.Pb(),u.Qb(22,"dxi-item",14),u.Nb(23,"dxo-label",9),u.Pb(),u.Qb(24,"dxi-item",15),u.Nb(25,"dxo-label",9),u.Pb(),u.Pb(),u.Nb(26,"dxi-item",16),u.Pb(),u.Pb(),u.Pb(),u.Nb(27,"div",2),u.Pb(),u.Qb(28,"div",0),u.Nb(29,"div",1),u.Qb(30,"div",2),u.Qb(31,"form",17),u.Qb(32,"dx-form",6),u.Qb(33,"dxi-item",18),u.Qb(34,"dxi-item",7),u.Qb(35,"dxi-item",12),u.Nb(36,"dx-button",19),u.Qb(37,"dx-button",20),u.Xb("onClick",function(){return t.onDownload()}),u.Pb(),u.Qb(38,"dx-button",21),u.Xb("click",function(){return u.pc(e),u.mc(40).click()}),u.Pb(),u.Qb(39,"input",22,23),u.Xb("change",function(e){return t.onSelectFile(e)}),u.Pb(),u.Pb(),u.Pb(),u.Qb(41,"dxi-item",24),u.Qb(42,"dxi-item"),u.Qb(43,"dx-data-grid",25,26),u.Xb("heightChange",function(e){return t.gridHeight=e})("selectedRowKeysChange",function(e){return t.selectedRows=e}),u.Nb(45,"dxo-sorting",27),u.Nb(46,"dxo-filter-row",28),u.Nb(47,"dxo-selection",29),u.Nb(48,"dxo-paging",30),u.Nb(49,"dxo-pager",31),u.Qb(50,"dxi-column",32),u.Xb("filterValueChange",function(e){return t.codeFilter=e}),u.Pb(),u.Qb(51,"dxi-column",33),u.Xb("filterValueChange",function(e){return t.codeDeliveryBillFilter=e}),u.Pb(),u.Nb(52,"dxi-column",34),u.Nb(53,"dxi-column",35),u.Nb(54,"dxi-column",36),u.Qb(55,"dxi-column",37),u.tc(56,Ne,3,2,"div",38),u.Pb(),u.Nb(57,"dxi-column",39),u.Nb(58,"dxi-column",40),u.Nb(59,"dxi-column",41),u.tc(60,Le,3,4,"div",38),u.tc(61,Ue,9,8,"div",38),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb()}2&e&&(u.Bb(4),u.fc("ngForOf",t.orderReport),u.Bb(4),u.fc("readOnly",!1)("formData",t)("showColonAfterLabel",!0)("showValidationSummary",!1),u.Bb(1),u.fc("colCount",5),u.Bb(1),u.fc("colSpan",1)("editorOptions",u.ic(63,Ze,t.lookupStaff)),u.Bb(1),u.fc("text","Nh\xe2n vi\xean"),u.Bb(1),u.fc("colSpan",1)("editorOptions",u.kc(65,qe,t.statusesFilterChanged,t.statusesFilter,t.lookupOrderStatus)),u.Bb(1),u.fc("text","Tr\u1ea1ng th\xe1i"),u.Bb(1),u.fc("colSpan",1)("editorOptions",u.ic(69,Ze,t.lookupOrderType)),u.Bb(1),u.fc("text","Lo\u1ea1i \u0111\u01a1n h\xe0ng"),u.Bb(1),u.fc("colSpan",1),u.Bb(1),u.fc("value",t.fromDateFilter),u.Bb(1),u.fc("text","T\u1eeb ng\xe0y"),u.Bb(1),u.fc("colSpan",1),u.Bb(1),u.fc("value",t.toDateFilter),u.Bb(1),u.fc("text","\u0110\u1ebfn ng\xe0y"),u.Bb(1),u.fc("colSpan",1)("editorOptions",u.kc(71,We,t.lookupOrderHasContract,t.onChangeValue,t.valueSelectOrderHasContract)),u.Bb(1),u.fc("text","Lo\u1ea1i h\u1ee3p \u0111\u1ed3ng"),u.Bb(1),u.fc("colSpan",1)("editorOptions",u.kc(75,Ye,t.onSwitchOverDueValueChanged,t.overDueFilter,t.checkOverDueDataSource)),u.Bb(1),u.fc("text","Ki\u1ec3m tra tr\u1ec5 h\u1ea1n"),u.Bb(1),u.fc("buttonOptions",u.hc(79,Je)),u.Bb(6),u.fc("readOnly",!1)("formData",t)("showColonAfterLabel",!0)("showValidationSummary",!1),u.Bb(2),u.fc("colCount",2),u.Bb(1),u.fc("colSpan",2),u.Bb(1),u.fc("disabled",!t.isAllowAddOrEdit)("routerLink",u.hc(80,et)),u.Bb(1),u.fc("disabled",!t.isAllowAddOrEdit),u.Bb(1),u.fc("disabled",!t.isAllowAddOrEdit),u.Bb(5),u.fc("height",t.gridHeight)("showColumnLines",!1)("rowAlternationEnabled",!0)("hoverStateEnabled",!0)("remoteOperations",!0)("selectedRowKeys",t.selectedRows)("dataSource",t.orderDatasource)("columnAutoWidth",!0)("showBorders",!0),u.Bb(3),u.fc("visible",!0),u.Bb(2),u.fc("pageSize",20),u.Bb(1),u.fc("showPageSizeSelector",!0)("allowedPageSizes",u.hc(81,tt))("showInfo",!0),u.Bb(1),u.fc("filterValue",t.codeFilter),u.Bb(1),u.fc("filterValue",t.codeDeliveryBillFilter),u.Bb(4),u.fc("allowFiltering",!1),u.Bb(1),u.fc("dxTemplateOf","checkboxCellTemplate"),u.Bb(1),u.fc("allowFiltering",!1),u.Bb(1),u.fc("allowFiltering",!1),u.Bb(1),u.fc("width",300)("allowFiltering",!1)("allowSorting",!1),u.Bb(1),u.fc("dxTemplateOf","cellTemplate"),u.Bb(1),u.fc("dxTemplateOf","statusCellTemplate"))},directives:[n.i,r.i,r.e,r.f,C.a,B.k,B.lb,k.a,O.a,g.c,A.a,B.Lb,B.W,B.Hb,B.yb,B.wb,B.f,T.d,n.j,Qe.a],styles:[""]}),e})();const rt=[{path:"",redirectTo:"list",pathMatch:"prefix"},{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Gb({type:e,selectors:[["app-order"]],decls:1,vars:0,template:function(e,t){1&e&&u.Nb(0,"router-outlet")},directives:[g.g],styles:[""]}),e})(),children:[{path:"list",component:it},{path:"detail/:id",component:Be},{path:"create",component:q}]}];let nt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.Kb({type:e}),e.\u0275inj=u.Jb({imports:[[g.f.forChild(rt)],g.f]}),e})();var at=i("7m6G"),ot=i("4Ewp"),st=i("Wx6Q"),dt=i("Qlw+"),ct=i("uTW7"),lt=i("ir3x"),ht=i("M+dh"),ut=i("LT8A"),pt=i("zn50"),bt=i("BbNB"),mt=i("xcIV"),gt=i("lgXn"),ft=i("w76M"),vt=i("Ylls"),St=i("/ZIY"),xt=i("XPKZ"),yt=i("4/q7"),Pt=i("we1Z"),Ct=i("crAt"),Ot=i("jhN1"),wt=i("j57p");const kt={provide:r.c,useExisting:Object(u.V)(()=>At),multi:!0};let At=(()=>{let e=class extends T.b{constructor(e,t,i,r,n,a,o,s){super(e,t,i,r,o,s),this._watcherHelper=r,this._idh=n,this.touched=e=>{},this._createEventEmitters([{subscribe:"contentReady",emit:"onContentReady"},{subscribe:"disposing",emit:"onDisposing"},{subscribe:"initialized",emit:"onInitialized"},{subscribe:"optionChanged",emit:"onOptionChanged"},{subscribe:"valueChanged",emit:"onValueChanged"},{emit:"accessKeyChange"},{emit:"activeStateEnabledChange"},{emit:"disabledChange"},{emit:"elementAttrChange"},{emit:"focusStateEnabledChange"},{emit:"heightChange"},{emit:"hintChange"},{emit:"hoverStateEnabledChange"},{emit:"isValidChange"},{emit:"nameChange"},{emit:"readOnlyChange"},{emit:"rtlEnabledChange"},{emit:"switchedOffTextChange"},{emit:"switchedOnTextChange"},{emit:"tabIndexChange"},{emit:"validationErrorChange"},{emit:"validationErrorsChange"},{emit:"validationMessageModeChange"},{emit:"validationStatusChange"},{emit:"valueChange"},{emit:"visibleChange"},{emit:"widthChange"},{emit:"onBlur"}]),this._idh.setHost(this),a.setHost(this)}get accessKey(){return this._getOption("accessKey")}set accessKey(e){this._setOption("accessKey",e)}get activeStateEnabled(){return this._getOption("activeStateEnabled")}set activeStateEnabled(e){this._setOption("activeStateEnabled",e)}get disabled(){return this._getOption("disabled")}set disabled(e){this._setOption("disabled",e)}get elementAttr(){return this._getOption("elementAttr")}set elementAttr(e){this._setOption("elementAttr",e)}get focusStateEnabled(){return this._getOption("focusStateEnabled")}set focusStateEnabled(e){this._setOption("focusStateEnabled",e)}get height(){return this._getOption("height")}set height(e){this._setOption("height",e)}get hint(){return this._getOption("hint")}set hint(e){this._setOption("hint",e)}get hoverStateEnabled(){return this._getOption("hoverStateEnabled")}set hoverStateEnabled(e){this._setOption("hoverStateEnabled",e)}get isValid(){return this._getOption("isValid")}set isValid(e){this._setOption("isValid",e)}get name(){return this._getOption("name")}set name(e){this._setOption("name",e)}get readOnly(){return this._getOption("readOnly")}set readOnly(e){this._setOption("readOnly",e)}get rtlEnabled(){return this._getOption("rtlEnabled")}set rtlEnabled(e){this._setOption("rtlEnabled",e)}get switchedOffText(){return this._getOption("switchedOffText")}set switchedOffText(e){this._setOption("switchedOffText",e)}get switchedOnText(){return this._getOption("switchedOnText")}set switchedOnText(e){this._setOption("switchedOnText",e)}get tabIndex(){return this._getOption("tabIndex")}set tabIndex(e){this._setOption("tabIndex",e)}get validationError(){return this._getOption("validationError")}set validationError(e){this._setOption("validationError",e)}get validationErrors(){return this._getOption("validationErrors")}set validationErrors(e){this._setOption("validationErrors",e)}get validationMessageMode(){return this._getOption("validationMessageMode")}set validationMessageMode(e){this._setOption("validationMessageMode",e)}get validationStatus(){return this._getOption("validationStatus")}set validationStatus(e){this._setOption("validationStatus",e)}get value(){return this._getOption("value")}set value(e){this._setOption("value",e)}get visible(){return this._getOption("visible")}set visible(e){this._setOption("visible",e)}get width(){return this._getOption("width")}set width(e){this._setOption("width",e)}change(e){}_createInstance(e,t){return new wt.a(e,t)}writeValue(e){this.eventHelper.lockedValueChangeEvent=!0,this.value=e,this.eventHelper.lockedValueChangeEvent=!1}setDisabledState(e){this.disabled=e}registerOnChange(e){this.change=e}registerOnTouched(e){this.touched=e}_createWidget(e){super._createWidget(e),this.instance.on("focusOut",e=>{this.eventHelper.fireNgEvent("onBlur",[e])})}ngOnDestroy(){this._destroyWidget()}ngOnChanges(e){super.ngOnChanges(e),this.setupChanges("validationErrors",e)}setupChanges(e,t){e in this._optionsToUpdate||this._idh.setup(e,t)}ngDoCheck(){this._idh.doCheck("validationErrors"),this._watcherHelper.checkWatchers(),super.ngDoCheck(),super.clearChangedOptions()}_setOption(e,t){let i=this._idh.setupSingle(e,t),r=null!==this._idh.getChanges(e,t);(i||r)&&super._setOption(e,t)}};return e.\u0275fac=function(t){return new(t||e)(u.Mb(u.l),u.Mb(u.B),u.Mb(T.e),u.Mb(T.j),u.Mb(T.g),u.Mb(T.i),u.Mb(Ot.c),u.Mb(u.D))},e.\u0275cmp=u.Gb({type:e,selectors:[["dx-switch"]],hostBindings:function(e,t){1&e&&u.Xb("onBlur",function(e){return t.touched(e)})("valueChange",function(e){return t.change(e)})},inputs:{accessKey:"accessKey",activeStateEnabled:"activeStateEnabled",disabled:"disabled",elementAttr:"elementAttr",focusStateEnabled:"focusStateEnabled",height:"height",hint:"hint",hoverStateEnabled:"hoverStateEnabled",isValid:"isValid",name:"name",readOnly:"readOnly",rtlEnabled:"rtlEnabled",switchedOffText:"switchedOffText",switchedOnText:"switchedOnText",tabIndex:"tabIndex",validationError:"validationError",validationErrors:"validationErrors",validationMessageMode:"validationMessageMode",validationStatus:"validationStatus",value:"value",visible:"visible",width:"width"},outputs:{onContentReady:"onContentReady",onDisposing:"onDisposing",onInitialized:"onInitialized",onOptionChanged:"onOptionChanged",onValueChanged:"onValueChanged",accessKeyChange:"accessKeyChange",activeStateEnabledChange:"activeStateEnabledChange",disabledChange:"disabledChange",elementAttrChange:"elementAttrChange",focusStateEnabledChange:"focusStateEnabledChange",heightChange:"heightChange",hintChange:"hintChange",hoverStateEnabledChange:"hoverStateEnabledChange",isValidChange:"isValidChange",nameChange:"nameChange",readOnlyChange:"readOnlyChange",rtlEnabledChange:"rtlEnabledChange",switchedOffTextChange:"switchedOffTextChange",switchedOnTextChange:"switchedOnTextChange",tabIndexChange:"tabIndexChange",validationErrorChange:"validationErrorChange",validationErrorsChange:"validationErrorsChange",validationMessageModeChange:"validationMessageModeChange",validationStatusChange:"validationStatusChange",valueChange:"valueChange",visibleChange:"visibleChange",widthChange:"widthChange",onBlur:"onBlur"},features:[u.Ab([T.e,T.j,kt,T.i,T.g]),u.yb,u.zb],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e=Object(Ct.a)([Object(Ct.c)(7,Object(u.q)(u.D)),Object(Ct.b)("design:paramtypes",[u.l,u.B,T.e,T.j,T.g,T.i,Ot.c,Object])],e),e})(),Bt=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.Kb({type:e}),e.\u0275inj=u.Jb({imports:[[T.c,T.f,Ot.b],T.f]}),e})(),Tt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.Kb({type:e}),e.\u0275inj=u.Jb({imports:[[n.b,nt,O.b,at.a,ot.a,st.a,dt.a,C.b,Qe.b,w.b,ct.a,lt.a,ht.a,ut.a,pt.a,bt.a,mt.a,T.f,A.b,gt.a,ft.b,vt.a,St.a,xt.b,yt.b,k.b,r.b,St.a,E.b,Pt.a,Bt]]}),e})()},j57p:function(e,t,i){"use strict";var r=i("+dKZ"),n=i("W2II"),a=i("xPQU"),o=i("TE0E"),s=i("ua+q"),d=i("CF5h"),c=i("MtyI"),l=i("AmyY"),h=i("oiM+"),u=i("fYZB"),p=i("Ss0b"),b=i("3CDA"),m=i("6SE/"),g=i("Y+c9"),f=i("zAdP"),v="dx-switch-on-value",S=100,x=c.a.inherit({_supportedKeys:function(){var e=this.option("rtlEnabled"),t=function(e){e.preventDefault(),this._clickAction({event:e})},i=function(e,t){t.preventDefault(),t.stopPropagation(),this._saveValueChangeEvent(t),this._animateValue(e)};return Object(s.a)(this.callBase(),{space:t,enter:t,leftArrow:i.bind(this,!!e),rightArrow:i.bind(this,!e)})},_useTemplates:function(){return!1},_getDefaultOptions:function(){return Object(s.a)(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,switchedOnText:b.a.format("dxSwitch-switchedOnText"),switchedOffText:b.a.format("dxSwitch-switchedOffText"),value:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===o.a.real().deviceType&&!o.a.isSimulator()},options:{focusStateEnabled:!0}}])},_feedbackHideTimeout:0,_animating:!1,_initMarkup:function(){this._renderContainers(),this.$element().addClass("dx-switch").append(this._$switchWrapper),this._renderSubmitElement(),this._renderClick(),this.setAria("role","button"),this._renderSwipeable(),this.callBase(),this._renderSwitchInner(),this._renderLabels(),this._renderValue()},_getInnerOffset:function(e,t){return(t-this._offsetDirection()*Number(!e))/2*100+"%"},_getHandleOffset:function(e,t){return this.option("rtlEnabled")&&(e=!e),e?100*-t-100+"%":100*-t+"%"},_renderSwitchInner:function(){this._$switchInner=Object(n.a)("<div>").addClass("dx-switch-inner").appendTo(this._$switchContainer),this._$handle=Object(n.a)("<div>").addClass("dx-switch-handle").appendTo(this._$switchInner)},_renderLabels:function(){this._$labelOn=Object(n.a)("<div>").addClass("dx-switch-on").prependTo(this._$switchInner),this._$labelOff=Object(n.a)("<div>").addClass("dx-switch-off").appendTo(this._$switchInner),this._setLabelsText()},_renderContainers:function(){this._$switchContainer=Object(n.a)("<div>").addClass("dx-switch-container"),this._$switchWrapper=Object(n.a)("<div>").addClass("dx-switch-wrapper").append(this._$switchContainer)},_renderSwipeable:function(){this._createComponent(this.$element(),g.a,{elastic:!1,immediate:!0,onStart:this._swipeStartHandler.bind(this),onUpdated:this._swipeUpdateHandler.bind(this),onEnd:this._swipeEndHandler.bind(this),itemSizeFunc:this._getItemSizeFunc.bind(this)})},_getItemSizeFunc:function(){return Object(r.i)(this._$switchContainer,!0)-Object(u.a)(this._$handle.get(0)).width},_renderSubmitElement:function(){this._$submitElement=Object(n.a)("<input>").attr("type","hidden").appendTo(this.$element())},_getSubmitElement:function(){return this._$submitElement},_offsetDirection:function(){return this.option("rtlEnabled")?-1:1},_renderPosition:function(e,t){var i=this._getInnerOffset(e,t),r=this._getHandleOffset(e,t);this._$switchInner.css("transform"," translateX("+i+")"),this._$handle.css("transform"," translateX("+r+")")},_validateValue:function(){var e=this.option("value");"boolean"!=typeof e&&this._options.silent("value",!!e)},_renderClick:function(){var e=Object(l.a)(m.a,this.NAME),t=this.$element();this._clickAction=this._createAction(this._clickHandler.bind(this)),a.a.off(t,e),a.a.on(t,e,(function(e){this._clickAction({event:e})}).bind(this))},_clickHandler:function(e){this._saveValueChangeEvent(e.event),this._animating||this._swiping||this._animateValue(!this.option("value"))},_animateValue:function(e){var t=this.option("value"),i=e;if(t!==i){this._animating=!0;var r=this._getInnerOffset(t,0),n=this._getInnerOffset(i,0),a=this._getHandleOffset(t,0),o=this._getHandleOffset(i,0),s=this,d={},c={},l={},h={};d.transform=" translateX("+r+")",c.transform=" translateX("+n+")",l.transform=" translateX("+a+")",h.transform=" translateX("+o+")",this.$element().toggleClass(v,i),p.a.animate(this._$handle,{from:l,to:h,duration:S}),p.a.animate(this._$switchInner,{from:d,to:c,duration:S,complete:function(){s._animating=!1,s.option("value",i)}})}},_swipeStartHandler:function(e){var t=this.option("value"),i=this.option("rtlEnabled"),r=i?0:1,n=i?1:0;e.event.maxLeftOffset=t?r:n,e.event.maxRightOffset=t?n:r,this._swiping=!0,this._feedbackDeferred=new f.a,Object(h.b)(this._feedbackDeferred),this._toggleActiveState(this.$element(),this.option("activeStateEnabled"))},_swipeUpdateHandler:function(e){this._renderPosition(this.option("value"),e.event.offset)},_swipeEndHandler:function(e){var t=this,i=this._offsetDirection(),r={},n={},a=this._getInnerOffset(t.option("value"),e.event.targetOffset),o=this._getHandleOffset(t.option("value"),e.event.targetOffset);r.transform=" translateX("+a+")",n.transform=" translateX("+o+")",p.a.animate(this._$handle,{to:n,duration:S}),p.a.animate(this._$switchInner,{to:r,duration:S,complete:function(){t._swiping=!1;var r=t.option("value")+i*e.event.targetOffset;t._saveValueChangeEvent(e.event),t.option("value",Boolean(r)),t._feedbackDeferred.resolve(),t._toggleActiveState(t.$element(),!1)}})},_renderValue:function(){this._validateValue();var e=this.option("value");this._renderPosition(e,0),this.$element().toggleClass(v,e),this._getSubmitElement().val(e),this.setAria({pressed:e,label:this.option(e?"switchedOnText":"switchedOffText")})},_setLabelsText:function(){this._$labelOn&&this._$labelOn.text(this.option("switchedOnText")),this._$labelOff&&this._$labelOff.text(this.option("switchedOffText"))},_visibilityChanged:function(e){e&&this.repaint()},_optionChanged:function(e){switch(e.name){case"width":delete this._marginBound,this._refresh();break;case"switchedOnText":case"switchedOffText":this._setLabelsText();break;case"value":this._renderValue(),this.callBase(e);break;default:this.callBase(e)}}});Object(d.a)("dxSwitch",x),t.a=x}}]);