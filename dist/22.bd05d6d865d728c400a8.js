(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{WLUK:function(e,t,i){"use strict";i.r(t),i.d(t,"ProductsModule",function(){return q});var o=i("ofXK"),a=i("tyNb"),n=i("eIep"),r=i("gSRN"),s=i("cNn3"),c=i("LRne"),d=i("fXoL"),l=i("8/KI"),b=i("k8YA"),u=i("WYlB"),h=i("ZzPI"),p=i("6t9p");const m=["productDataGrid"];function f(e,t){if(1&e){const e=d.Rb();d.Qb(0,"dx-button",42),d.Xb("onClick",function(t){return d.pc(e),d.Zb().onDelete(t)}),d.Pb()}2&e&&d.fc("useSubmitBehavior",!0)}function g(e,t){1&e&&(d.Qb(0,"div",43),d.Nb(1,"img",44),d.Pb()),2&e&&(d.Bb(1),d.fc("src","assets/image/plus.png",d.rc))}function x(e,t){if(1&e&&(d.Qb(0,"div",45),d.Nb(1,"img",46),d.Pb()),2&e){const e=d.Zb();d.Bb(1),d.fc("src",e.image,d.rc)}}const S=function(){return{disabled:!0}},w=function(e){return{items:e,displayExpr:"name",valueExpr:"id",searchEnabled:!0,value:1}},v=function(){return{format:"#,##0"}},B=function(){return[5,10,20,50,100,200]};let y=(()=>{class e{constructor(e,t,i){this.productService=e,this.messageService=t,this.lookupService=i}ngOnInit(){this.products=new r.a({load:e=>this.productService.getAll(e.pageNo,e.pageSize,this.nameFilter,null,null)}),this.productService.getAll(1,10,null,null,null).subscribe(e=>{this.data=e.data}),this.lookupService.unit().subscribe(e=>{this.unitLookup=e}),this.formData=new s.L}clearForm(){this.formData=new s.L,this.image=null,this.imageFile=null,this.selectedRows=null}onSelectionChanged(e){this.selectedRows&&this.selectedRows.length>0&&this._loadDetail(this.selectedRows[0].id).subscribe(e=>{this._refreshDataGrid()})}_loadDetail(e){return this.productService.get(e).pipe(Object(n.a)(e=>(this.formData=e,this.image=e.image,this.imageFile=null,Object(c.a)(e))))}_refreshDataGrid(){this.productDataGrid.instance.refresh()}onFormSubmit(e){if(e.preventDefault(),this.formData&&this.formData.id)if(this.data.find(e=>e.code===this.formData.code&&e.id!==this.formData.id))this.messageService.error("M\xe3 s\u1ea3n ph\u1ea9m \u0111\xe3 t\u1ed3n t\u1ea1i");else{const e=new s.fb;e.init(this.formData),e.imageFile=this.imageFile,this.productService.update(this.formData.id,e).subscribe(e=>{this.messageService.success("L\u01b0u th\xe0nh c\xf4ng"),this.productDataGrid.instance.refresh(),this._loadDetail(this.formData.id).subscribe(e=>{this._refreshDataGrid()})})}else if(this.data.find(e=>e.code===this.formData.code))this.messageService.error("M\xe3 s\u1ea3n ph\u1ea9m \u0111\xe3 t\u1ed3n t\u1ea1i");else{const e=new s.m;e.init(this.formData),e.imageFile=this.imageFile,this.productService.create(e).subscribe(e=>{this.messageService.success("L\u01b0u th\xe0nh c\xf4ng"),this.productDataGrid.instance.refresh(),this._loadDetail(e).subscribe(e=>{this._refreshDataGrid()})})}}onDelete(e){this.messageService.confirmDelete(e=>{e&&this.formData&&this.formData.id&&this.productService.delete(this.formData.id).subscribe(e=>{this.messageService.success("X\xf3a s\u1ea3n ph\u1ea9m th\xe0nh c\xf4ng!"),this.productDataGrid.instance.refresh(),this.formData=new s.L,this.image=null,this.imageFile=null,this.selectedRows=null})})}onFormFilterSubmit(e){e.preventDefault(),this.productDataGrid.instance.refresh()}handleInputChange(e){const t=e.dataTransfer?e.dataTransfer.files[0]:e.target.files[0],i=new FileReader;t.type.match(/image-*/)?(i.onload=this._handleReaderLoaded.bind(this),i.readAsDataURL(t)):this.messageService.error("file ch\u1ecdn kh\xf4ng ph\u1ea3i l\xe0 h\xecnh \u1ea3nh")}_handleReaderLoaded(e){const t=e.target;this.image=t.result,this.imageFile=t.result}}return e.\u0275fac=function(t){return new(t||e)(d.Mb(s.O),d.Mb(l.a),d.Mb(s.E))},e.\u0275cmp=d.Gb({type:e,selectors:[["app-products-list"]],viewQuery:function(e,t){if(1&e&&d.zc(m,1),2&e){let e;d.lc(e=d.Yb())&&(t.productDataGrid=e.first)}},decls:58,vars:70,consts:[[1,"card","custom-card",2,"margin-bottom","5px"],[1,"card-header"],[1,"card-body"],[3,"readOnly","formData","showColonAfterLabel","showValidationSummary"],["itemType","group","caption","",3,"colCount"],["itemType","group","caption","",2,"margin-bottom","2rem",3,"colSpan"],["action","",3,"submit"],["validationGroup","newsForm",3,"readOnly","formData","showColonAfterLabel","showValidationSummary"],["itemType","group","caption","Th\xf4ng tin ch\xednh"],["text","T\u1ea1o m\u1edbi","icon","fa fa-plus-square","type","success",2,"margin-right","10px","background-color","#ed8200","font-weight","bold","padding","2px",3,"onClick"],["text","L\u01b0u","type","success","icon","fa fa-floppy-o","validationGroup","newsForm",2,"margin-right","10px","background-color","#12007c","font-weight","bold","padding","2px",3,"useSubmitBehavior"],["text","X\xf3a","type","success","icon","fa fa-ban","validationGroup","newsForm","style"," margin-right: 10px; background-color:#ff000f; font-weight: bold; padding: 2px;",3,"useSubmitBehavior","onClick",4,"ngIf"],["itemType","group","caption",""],["dataField","code",3,"colSpan","editorOptions"],[3,"text"],["dataType","empty",3,"colSpan"],["dataField","name",3,"colSpan"],["type","required","message","Tr\u01b0\u1eddng n\xe0y l\xe0 b\u1eaft bu\u1ed9c"],["type","stringLength","message","T\xean s\u1ea3n ph\u1ea9m kh\xf4ng v\u01b0\u1ee3t qu\xe1 300 k\xfd t\u1ef1",3,"max"],["editorType","dxSelectBox","dataField","unitId",3,"colSpan","editorOptions"],["dataField","price","editorType","dxNumberBox",3,"colSpan","editorOptions"],["type","stringLength","message","H\u1ecd t\xean kh\xf4ng v\u01b0\u1ee3t qu\xe1 300 k\xfd t\u1ef1",3,"max"],["dataField","quantity","editorType","dxNumberBox",3,"colSpan","editorOptions"],["dataField","weight","editorType","dxNumberBox",3,"colSpan","editorOptions"],["itemType","group",3,"colCount"],["dataField","rating","editorType","dxNumberBox",3,"colSpan","disabled","editorOptions"],[3,"colSpan"],[1,"image-upload",2,"height","6rem"],["type","file","accept","image/*",3,"change"],["style","position: absolute; z-index: 1; top: 0;bottom: 0; border: 2px dashed #c8c8c8; border-radius: 0.5rem;",4,"ngIf"],["style","position: absolute; z-index: 1; top: 0; bottom: 0;",4,"ngIf"],["itemType","group","caption","Danh s\xe1ch s\u1ea3n ph\u1ea9m",3,"colSpan"],["height","47rem",3,"showColumnLines","remoteOperations","rowAlternationEnabled","selectedRowKeys","hoverStateEnabled","dataSource","columnAutoWidth","showBorders","selectedRowKeysChange","onSelectionChanged"],["productDataGrid",""],[3,"visible"],["mode","single"],[3,"pageSize"],[3,"showPageSizeSelector","allowedPageSizes","showInfo"],["dataField","name","caption","T\xean",3,"width","filterValue","filterValueChange"],["dataField","code","caption","M\xe3 s\u1ea3n ph\u1ea9m",3,"allowSearch"],["dataField","price","caption","Gi\xe1 (VN\u0110)","format","#,###"],["dataField","weight","caption","Kh\u1ed1i l\u01b0\u1ee3ng","format","#,###"],["text","X\xf3a","type","success","icon","fa fa-ban","validationGroup","newsForm",2,"margin-right","10px","background-color","#ff000f","font-weight","bold","padding","2px",3,"useSubmitBehavior","onClick"],[2,"position","absolute","z-index","1","top","0","bottom","0","border","2px dashed #c8c8c8","border-radius","0.5rem"],[2,"width","2rem","height","2rem","margin","2rem","display","block",3,"src"],[2,"position","absolute","z-index","1","top","0","bottom","0"],[2,"max-width","100%","max-height","100%",3,"src"]],template:function(e,t){1&e&&(d.Qb(0,"div",0),d.Nb(1,"div",1),d.Qb(2,"div",2),d.Qb(3,"dx-form",3),d.Qb(4,"dxi-item",4),d.Qb(5,"dxi-item",5),d.Qb(6,"form",6),d.Xb("submit",function(e){return t.onFormSubmit(e)}),d.Qb(7,"dx-form",7),d.Qb(8,"dxi-item",8),d.Qb(9,"dxi-item",4),d.Qb(10,"dx-button",9),d.Xb("onClick",function(){return t.clearForm()}),d.Pb(),d.Nb(11,"dx-button",10),d.tc(12,f,1,1,"dx-button",11),d.Pb(),d.Qb(13,"dxi-item",12),d.Qb(14,"dxi-item",4),d.Qb(15,"dxi-item",13),d.Nb(16,"dxo-label",14),d.Pb(),d.Nb(17,"dxi-item",15),d.Qb(18,"dxi-item",16),d.Nb(19,"dxo-label",14),d.Nb(20,"dxi-validation-rule",17),d.Nb(21,"dxi-validation-rule",18),d.Pb(),d.Pb(),d.Qb(22,"dxi-item",4),d.Qb(23,"dxi-item",19),d.Nb(24,"dxo-label",14),d.Pb(),d.Qb(25,"dxi-item",20),d.Nb(26,"dxo-label",14),d.Nb(27,"dxi-validation-rule",17),d.Nb(28,"dxi-validation-rule",21),d.Pb(),d.Qb(29,"dxi-item",22),d.Nb(30,"dxo-label",14),d.Pb(),d.Qb(31,"dxi-item",23),d.Nb(32,"dxo-label",14),d.Pb(),d.Pb(),d.Qb(33,"dxi-item",24),d.Qb(34,"dxi-item",25),d.Nb(35,"dxo-label",14),d.Pb(),d.Pb(),d.Qb(36,"dxi-item",24),d.Qb(37,"dxi-item",26),d.Nb(38,"dxo-label",14),d.Qb(39,"div",27),d.Qb(40,"input",28),d.Xb("change",function(e){return t.handleInputChange(e)}),d.Pb(),d.tc(41,g,2,1,"div",29),d.tc(42,x,2,1,"div",30),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(43,"dxi-item",31),d.Qb(44,"dxi-item",12),d.Nb(45,"dxi-item",12),d.Pb(),d.Qb(46,"dxi-item",12),d.Qb(47,"dxi-item"),d.Qb(48,"dx-data-grid",32,33),d.Xb("selectedRowKeysChange",function(e){return t.selectedRows=e})("onSelectionChanged",function(e){return t.onSelectionChanged(e)}),d.Nb(50,"dxo-filter-row",34),d.Nb(51,"dxo-selection",35),d.Nb(52,"dxo-paging",36),d.Nb(53,"dxo-pager",37),d.Qb(54,"dxi-column",38),d.Xb("filterValueChange",function(e){return t.nameFilter=e}),d.Pb(),d.Nb(55,"dxi-column",39),d.Nb(56,"dxi-column",40),d.Nb(57,"dxi-column",41),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb()),2&e&&(d.Bb(3),d.fc("readOnly",!1)("formData",t)("showColonAfterLabel",!0)("showValidationSummary",!1),d.Bb(1),d.fc("colCount",4),d.Bb(1),d.fc("colSpan",2),d.Bb(2),d.fc("readOnly",!1)("formData",t.formData)("showColonAfterLabel",!0)("showValidationSummary",!1),d.Bb(2),d.fc("colCount",2),d.Bb(2),d.fc("useSubmitBehavior",!0),d.Bb(1),d.fc("ngIf",t.selectedRows),d.Bb(2),d.fc("colCount",4),d.Bb(1),d.fc("colSpan",2)("editorOptions",d.hc(62,S)),d.Bb(1),d.fc("text","M\xe3 s\u1ea3n ph\u1ea9m"),d.Bb(1),d.fc("colSpan",2),d.Bb(1),d.fc("colSpan",4),d.Bb(1),d.fc("text","T\xean s\u1ea3n ph\u1ea9m"),d.Bb(2),d.fc("max",300),d.Bb(1),d.fc("colCount",4),d.Bb(1),d.fc("colSpan",2)("editorOptions",d.ic(63,w,t.unitLookup)),d.Bb(1),d.fc("text","\u0110\u01a1n v\u1ecb b\xe1n"),d.Bb(1),d.fc("colSpan",2)("editorOptions",d.hc(65,v)),d.Bb(1),d.fc("text","Gi\xe1"),d.Bb(2),d.fc("max",300),d.Bb(1),d.fc("colSpan",2)("editorOptions",d.hc(66,v)),d.Bb(1),d.fc("text","S\u1ed1 l\u01b0\u1ee3ng"),d.Bb(1),d.fc("colSpan",2)("editorOptions",d.hc(67,v)),d.Bb(1),d.fc("text","Kh\u1ed1i l\u01b0\u1ee3ng"),d.Bb(1),d.fc("colCount",4),d.Bb(1),d.fc("colSpan",2)("disabled",!0)("editorOptions",d.hc(68,v)),d.Bb(1),d.fc("text","\u0110\xe1nh gi\xe1"),d.Bb(1),d.fc("colCount",3),d.Bb(1),d.fc("colSpan",2),d.Bb(1),d.fc("text","Ch\u1ecdn h\xecnh \u1ea3nh"),d.Bb(3),d.fc("ngIf",!t.image),d.Bb(1),d.fc("ngIf",t.image),d.Bb(1),d.fc("colSpan",2),d.Bb(5),d.fc("showColumnLines",!1)("remoteOperations",!0)("rowAlternationEnabled",!0)("selectedRowKeys",t.selectedRows)("hoverStateEnabled",!0)("dataSource",t.products)("columnAutoWidth",!0)("showBorders",!0),d.Bb(2),d.fc("visible",!0),d.Bb(2),d.fc("pageSize",50),d.Bb(1),d.fc("showPageSizeSelector",!0)("allowedPageSizes",d.hc(69,B))("showInfo",!0),d.Bb(1),d.fc("width",300)("filterValue",t.nameFilter),d.Bb(1),d.fc("allowSearch",!1))},directives:[b.a,p.k,u.a,o.j,p.lb,p.A,h.a,p.W,p.Hb,p.yb,p.wb,p.f],styles:[""]}),e})();const D=[{path:"",redirectTo:"list",pathMatch:"prefix"},{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Gb({type:e,selectors:[["app-products"]],decls:1,vars:0,template:function(e,t){1&e&&d.Nb(0,"router-outlet")},directives:[a.g],styles:[""]}),e})(),children:[{path:"list",component:y}]}];let P=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.Kb({type:e}),e.\u0275inj=d.Jb({imports:[[a.f.forChild(D)],a.f]}),e})();var Q=i("7m6G"),N=i("4Ewp"),F=i("Wx6Q"),C=i("Qlw+"),k=i("gMzk"),O=i("Gkpw"),L=i("uTW7"),T=i("ir3x"),G=i("M+dh"),R=i("LT8A"),I=i("zn50"),z=i("BbNB"),A=i("xcIV"),X=i("PVOt"),K=i("lgXn"),M=i("w76M"),V=i("Ylls"),_=i("/ZIY"),E=i("XPKZ"),W=i("4/q7");let q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.Kb({type:e}),e.\u0275inj=d.Jb({providers:[],imports:[[o.b,P,u.b,Q.a,N.a,F.a,C.a,b.b,k.b,O.b,L.a,T.a,G.a,R.a,I.a,z.a,A.a,X.f,h.b,K.a,M.b,V.a,_.a,E.b,W.b]]}),e})()}}]);